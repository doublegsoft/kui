<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link rel="shortcut icon" href="img/favicon.png">
<title>KUI-BS4展示应用</title>
<link href="/3rd/font-awesome/css/all.css" rel="stylesheet">
<link href="/3rd/simple-line-icons/css/simple-line-icons.css" rel="stylesheet">
<link href="/3rd/jstree/themes/default/style.min.css" rel="stylesheet">
<link href="/3rd/bootstrap-datetimepicker/css/bootstrap-datetimepicker.min.css" rel="stylesheet">
<link href="/3rd/bootstrap-datetimepicker/css/bootstrap-datetimepicker-standalone.css" rel="stylesheet">
<link href="/3rd/bootstrap-fileinput/css/fileinput.min.css" rel="stylesheet">
<link href="/3rd/bootstrap-lightbox/ekko-lightbox.css" rel="stylesheet">
<link href="/3rd/trumbowyg/ui/trumbowyg.min.css" rel="stylesheet">
<link href="/3rd/perfect-scrollbar/css/perfect-scrollbar.css" rel="stylesheet">
<link href="/3rd/select2/css/select2.min.css" rel="stylesheet">
<link href="/3rd/ztree/css/zTreeStyle/zTreeStyle.css" rel="stylesheet">

<!-- Main styles for this application -->
<link href="/src/css/coreui.css" rel="stylesheet">
<link href="/src/css/kui-coreui.css" rel="stylesheet">
<link href="/src/css/kui.css" rel="stylesheet">
<link href="/src/css/kui-timeline.css" rel="stylesheet">
<link href="/src/css/kui-toc.css" rel="stylesheet">
<link href="/src/css/kui-districtpicker.css" rel="stylesheet">
<link href="/src/css/kui-alarm.css" rel="stylesheet">
<link href="/src/css/kui-checks.css" rel="stylesheet">
<link href="/src/css/kui-thread.css" rel="stylesheet">
</head>

<body id="body" class="app header-fixed sidebar-fixed aside-menu-fixed sidebar-lg-show" style="overflow-y: hidden">

  <header class="app-header navbar">
    <a class="navbar-brand" href="#">
      <img class="navbar-brand-full" src="/desktop/img/logo.png" width="145" height="45">
    </a>
    <button class="navbar-toggler mobile-sidebar-toggler d-lg-none mr-auto" type="button"> 
      <span class="navbar-toggler-icon"></span> 
    </button>
    <button class="navbar-toggler sidebar-toggler d-md-down-none" type="button"> 
      <span class="navbar-toggler-icon"></span> 
    </button>
    <ul class="nav navbar-nav ml-auto">
      <li class="nav-item d-md-down-none"> 
        <a class="nav-link" href="#"> 
          <i id="alarm_notification" class="icon-bell"></i> 
        </a> 
      </li>
      <li class="nav-item d-md-down-none"> <a class="nav-link" href="#"><i class="icon-list"></i></a> </li>
      <li class="nav-item d-md-down-none"> <a class="nav-link" href="#"><i class="icon-location-pin"></i></a> </li>
      <li class="nav-item dropdown"> 
        <a class="nav-link dropdown-toggle nav-link" data-toggle="dropdown" href="#" role="button" aria-haspopup="true" aria-expanded="false"> 
          <img id="avatar" src="/desktop/img/avatars/drew_brees.jpg" class="img-avatar"> 
        </a>
        <div class="dropdown-menu dropdown-menu-right">
          <div class="dropdown-header text-center"> 
            <strong>账户信息</strong> 
          </div>
          <a class="dropdown-item" href="#">
            <i class="fa fa-bell-o"></i>新消息<span class="badge badge-info">42</span>
          </a>
          <a class="dropdown-item" href="#">
            <i class="fa fa-tasks"></i>工作任务
            <span class="badge badge-danger">42</span>
          </a> 
          <div class="dropdown-header text-center"> 
            <strong>设置</strong> 
          </div>
          <a class="dropdown-item" href="javascript:gotoPersonalInformation();">
            <i class="fa fa-user"></i>个人信息
          </a> 
          <a class="dropdown-item" href="javascript:changePassword();">
            <i class="fa fa-file"></i>修改密码
          </a>
          <div class="divider"></div>
          <a class="dropdown-item" href="javascript:logout()">
            <i class="fa fa-lock"></i>退出
          </a> 
        </div>
      </li>
    </ul>
    <button class="navbar-toggler aside-menu-toggler" onclick="toggleRightBar();"> 
      <span class="navbar-toggler-icon"></span> 
    </button>
  </header>
  
  <div class="app-body">
    <!-- side menu -->
    <div class="sidebar">
      <nav id="sidemenu" class="sidebar-nav ps ps--active-y"></nav>
      <button class="sidebar-minimizer brand-minimizer" type="button"></button>
    </div>
  
    <!-- Main content -->
    <main class="main header-fixed" style="overflow-y: hidden">
      <div id="container" class="container-fluid" style="width: 100%; overflow-y: auto">
      
      </div>
    </main>
    <aside class="aside-menu"></aside>
  </div>
  <footer class="app-footer">
    <div>
      <a href="#">Good Manager</a>
      <span>© 2018 Christian Gann.</span>
    </div>
    <div class="ml-auto">
      <span>Powered by</span>
      <a href="https://github.com/doublegsoft/kui-bs4">KUI</a>
    </div>
  </footer>

<!--
<script type="text/javascript" src="http://api.map.baidu.com/api?v=2.0&ak=8d6c8b8f3749aed6b1aff3aad6f40e37&services=true"></script> 
-->
<script src="/3rd/jquery/jquery-3.2.1.min.js"></script> 
<script src="/3rd/bootstrap/js/bootstrap.bundle.min.js"></script> 
<script src="/3rd/echarts/echarts.min.js"></script> 
<script src="/3rd/d3/d3.min.js"></script> 
<script src="/3rd/three/three.js"></script> 
<script src="/3rd/three/loaders/OBJLoader.js"></script> 
<script src="/3rd/three/controls/TrackballControls.js"></script> 
<script src="/3rd/layer/layer.js"></script> 
<script src="/3rd/jstree/jstree.min.js"></script> 
<script src="/3rd/moment/moment.min.js"></script>
<script src="/3rd/handlebars/handlebars-v4.0.11.js"></script> 

<script src="/3rd/bootstrap-datetimepicker/js/bootstrap-datetimepicker.min.js"></script>
<script src="/3rd/bootstrap-datetimepicker/js/zh-cn.js"></script>  
<script src="/3rd/bootstrap-fileinput/js/fileinput.min.js"></script> 
<script src="/3rd/bootstrap-fileinput/js/locales/zh.js"></script> 
<script src="/3rd/bootstrap-fileinput/themes/fa/theme.min.js"></script> 
<script src="/3rd/bootstrap-lightbox/ekko-lightbox.min.js"></script> 

<script src="/3rd/sparkline/jquery.sparkline.min.js"></script> 
<script src="/3rd/trumbowyg/trumbowyg.min.js"></script> 
<script src="/3rd/perfect-scrollbar/js/perfect-scrollbar.min.js"></script>
<script src="/3rd/raphael/raphael.min.js"></script>
<script src="/3rd/flowchart/flowchart.min.js"></script>
<script src="/3rd/konva/konva.min.js"></script>
<script src="/3rd/select2/js/select2.min.js"></script>
<script src="/3rd/ztree/js/jquery.ztree.all.js"></script>

<script src="/src/js/kui-mainframe.js"></script> 
<script src="/src/js/kui-bootstrap.js"></script> 
<script src="/src/js/kui-ajax.js"></script> 
<script src="/src/js/kui-alarm.js"></script> 
<script src="/src/js/kui-dialog.js"></script> 
<script src="/src/js/kui-formdata.js"></script> 
<script src="/src/js/kui-validation.js"></script>  
<script src="/src/js/kui-calendar.js"></script> 
<script src="/src/js/kui-districtpicker.data.js"></script> 
<script src="/src/js/kui-districtpicker.js"></script> 
<script src="/src/js/kui-select.js"></script> 

<script src="/src/js/kui-svg.js"></script> 
<script src="/src/js/kui-searchbox.js"></script>
<script src="/src/js/kui-workflow.js"></script>
<script src="/src/js/kui-utils.js"></script>
<script src="/src/js/kui-xhr.js"></script>
 
<script src="/src/js/wiagram-utils.js"></script> 
<script src="/src/js/wiagram-rsrwl.js"></script> 
<script src="/src/js/wiagram-crsc.js"></script>

<script src="/src/js/kui-DesignCanvas.js"></script>
<script src="/src/js/kui-ReportDesigner.js"></script>
<script src="/src/js/kui-SimpleChart.js"></script>
<script src="/src/js/kui-FrozenColumnsTable.js"></script> 
<script src="/src/js/kui-PaginationTable.js"></script> 
<script src="/src/js/kui-PropertiesEditor.js"></script> 

<script src="/src/js/kui-statisticstable.js"></script> 
<script src="/src/js/kui-calendartable.dev.js"></script>
<script src="/src/js/kui-checktree.js"></script>

<script src="/src/js/kui-Checklist.js"></script>
<script src="/src/js/kui-FileUpload.js"></script>
<script src="/src/js/kui-TreelikeTable.js"></script>
</body>
</html>

<script id="sidemenu-template" type="text/x-handlebars-template">
<ul class="nav">
  {{#if home}}
  <li class="nav-item">
    <a class="nav-link" href="{{home.url}}">
      <i class="{{home.icon}}"></i>{{home.text}}
    </a>
  </li>
  {{/if}}
  {{#each groups}}
  <li class="nav-title">{{title}}</li>
    {{#each menus}}
  <li class="nav-item nav-dropdown"> 
    <a class="nav-link nav-dropdown-toggle" href="#">
      <i class="{{icon}}"></i>{{text}}
    </a>
    <ul class="nav-dropdown-items">
      {{#each items}}
      <li class="nav-item"> 
        <a class="nav-link" href="{{url}}">
          <span style="padding-left: 16px"></span>
          <i class="{{icon}}"></i>{{text}}
        </a> 
      </li>
      {{/each}}
    </ul>
  </li>
    {{/each}}
  {{/each}}
</ul>
</script>

<script>
  
// alarm  
var alarm = new Alarm({
  iconId: 'alarm_notification',
  mp3url: '/demo/img/ring.mp3'
});
setTimeout(function () {
  // alarm.start();
}, 5000);
setTimeout(function () {
  // alarm.stop();
}, 1000 * 60 * 2);
  
// load menus
xhr.post({
  url: '/desktop/data/menu.json',
  data: {},
  success: function(resp) {
    var source = document.getElementById('sidemenu-template').innerHTML;
    var template = Handlebars.compile(source);
    var html = template(resp);
    $('#sidemenu').append(html);

    // 由于后加载数据，所以事件无法由bootstrap加载，只能自己加载
    $('#sidemenu .nav-dropdown').on('click', function(e) {
      var dropdown = $(e.target).parent();
      if (dropdown.hasClass('open')) {
        dropdown.removeClass('open');
      } else {
        dropdown.addClass('open');
      }
    });
  }
});

$('.navbar-toggler').on('click', function(evt) {
  var body = $('#body');
  if (body.hasClass('sidebar-lg-show')) {
    body.removeClass('sidebar-lg-show');
  } else {
    body.addClass('sidebar-lg-show');
  }
});    

// 重算容器高度
document.getElementById('container').style.height = (document.body.clientHeight - 56 - 25) + 'px';

new PerfectScrollbar('.sidebar-nav');
new PerfectScrollbar('.container-fluid');
</script>