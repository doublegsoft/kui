
RGraph=window.RGraph||{isrgraph:true,isRGraph:true,rgraph:true};RGraph.SVG=RGraph.SVG||{};(function(win,doc,undefined)
{RGraph.SVG.Bipolar=function(conf)
{this.set=function(name,value)
{if(arguments.length===1&&typeof name==='object'){for(i in arguments[0]){if(typeof i==='string'){name=ret.name;value=ret.value;this.set(name,value);}}}else{var ret=RGraph.SVG.commonSetter({object:this,name:name,value:value});name=ret.name;value=ret.value;this.properties[name]=value;if(name==='colors'){this.originalColors=RGraph.SVG.arrayClone(value);this.colorsParsed=false;}}
return this;};this.get=function(name)
{return this.properties[name];};this.id=conf.id;this.uid=RGraph.SVG.createUID();this.container=document.getElementById(this.id);this.layers={};this.svg=RGraph.SVG.createSVG({object:this,container:this.container});this.isRGraph=true;this.isrgraph=true;this.rgraph=true;this.data=[conf.left,conf.right];this.left=conf.left;this.right=conf.right;this.type='bipolar';this.coords=[];this.coordsLeft=[];this.coordsRight=[];this.coords2=[];this.coords2Left=[];this.coords2Right=[];this.stackedBackfacesLeft=[];this.stackedBackfacesRight=[];this.originalColors={};this.gradientCounter=1;this.sequentialIndex=0;this.data_arr=[];for(var i=0;i<this.left.length;++i)this.data_arr.push(this.left[i]);for(var i=0;i<this.right.length;++i)this.data_arr.push(this.right[i]);RGraph.SVG.OR.add(this);this.container.style.display='inline-block';this.properties={marginLeft:35,marginRight:35,marginTop:35,marginBottom:35,marginCenter:null,backgroundColor:null,backgroundGrid:true,backgroundGridColor:'#ddd',backgroundGridLinewidth:1,backgroundGridHlines:true,backgroundGridHlinesCount:null,backgroundGridVlines:true,backgroundGridVlinesCount:null,backgroundGridBorder:true,backgroundGridDashed:false,backgroundGridDotted:false,backgroundGridDashArray:null,xaxis:true,xaxisLinewidth:1,xaxisTickmarks:true,xaxisTickmarksLength:5,xaxisLabelsCount:5,xaxisLabelsPositionEdgeTickmarksCount:5,xaxisColor:'black',xaxisLabelsOffsetx:0,xaxisLabelsOffsety:0,xaxisLabelsFont:null,xaxisLabelsSize:null,xaxisLabelsBold:null,xaxisLabelsItalic:null,xaxisLabelsColor:null,xaxisScaleUnitsPre:'',xaxisScaleUnitsPost:'',xaxisScaleStrict:false,xaxisScaleDecimals:0,xaxisScalePoint:'.',xaxisScaleThousand:',',xaxisScaleRound:false,xaxisScaleMax:null,xaxisScaleMin:0,xaxisScaleFormatter:null,yaxis:true,yaxisTickmarks:true,yaxisTickmarksLength:5,yaxisColor:'black',yaxisScale:false,yaxisLabels:null,yaxisLabelsOffsetx:0,yaxisLabelsOffsety:0,yaxisLabelsFont:null,yaxisLabelsSize:null,yaxisLabelsBold:null,yaxisLabelsItalic:null,yaxisLabelsColor:null,colors:['red','#0f0','#00f','#ff0','#0ff','#0f0','pink','orange','gray','black','red','#0f0','#00f','#ff0','#0ff','#0f0','pink','orange','gray','black'],colorsSequential:false,colorsStroke:'rgba(0,0,0,0)',marginInner:3,marginInnerGrouped:2,labelsAbove:false,labelsAboveFont:null,labelsAboveSize:null,labelsAboveBold:null,labelsAboveItalic:null,labelsAboveColor:null,labelsAboveBackground:null,labelsAboveBackgroundPadding:0,labelsAboveUnitsPre:null,labelsAboveUnitsPost:null,labelsAbovePoint:null,labelsAboveThousand:null,labelsAboveFormatter:null,labelsAboveDecimals:null,labelsAboveOffsetx:0,labelsAboveOffsety:0,labelsAboveSpecific:null,textColor:'black',textFont:'Arial, Verdana, sans-serif',textSize:12,textBold:false,textItalic:false,linewidth:1,grouping:'grouped',tooltips:null,tooltipsOverride:null,tooltipsEffect:'fade',tooltipsCssClass:'RGraph_tooltip',tooltipsCss:null,tooltipsEvent:'click',tooltipsFormattedThousand:',',tooltipsFormattedPoint:'.',tooltipsFormattedDecimals:0,tooltipsFormattedUnitsPre:'',tooltipsFormattedUnitsPost:'',tooltipsFormattedKeyColors:null,tooltipsFormattedKeyColorsShape:'square',tooltipsFormattedKeyLabels:[],tooltipsFormattedTableHeaders:null,tooltipsFormattedTableData:null,tooltipsPointer:true,tooltipsPositionStatic:true,highlightStroke:'rgba(0,0,0,0)',highlightFill:'rgba(255,255,255,0.7)',highlightLinewidth:1,title:'',titleX:null,titleY:null,titleHalign:'center',titleValign:null,titleSize:null,titleColor:null,titleFont:null,titleBold:null,titleItalic:null,titleSubtitle:null,titleSubtitleColor:'#aaa',titleSubtitleSize:null,titleSubtitleFont:null,titleSubtitleBold:null,titleSubtitleItalic:null,shadow:false,shadowOffsetx:2,shadowOffsety:2,shadowBlur:2,shadowOpacity:0.25,key:null,keyColors:null,keyOffsetx:0,keyOffsety:0,keyLabelsOffsetx:0,keyLabelsOffsety:-1,keyLabelsSize:null,keyLabelsBold:null,keyLabelsItalic:null,keyLabelsFont:null,keyLabelsColor:null};RGraph.SVG.getGlobals(this);if(RGraph.SVG.FX&&typeof RGraph.SVG.FX.decorate==='function'){RGraph.SVG.FX.decorate(this);}
this.responsive=RGraph.SVG.responsive;var properties=this.properties;this.draw=function()
{RGraph.SVG.fireCustomEvent(this,'onbeforedraw');this.width=Number(this.svg.getAttribute('width'));this.height=Number(this.svg.getAttribute('height'));RGraph.SVG.createDefs(this);properties.marginCenter=this.getMarginCenter();this.coords=[];this.coordsLeft=[];this.coordsRight=[];this.coords2=[];this.coords2Left=[];this.coords2Right=[];this.sequentialIndex=0;this.graphWidth=(this.width-properties.marginLeft-properties.marginRight-properties.marginCenter)/2;this.graphHeight=this.height-properties.marginTop-properties.marginBottom;RGraph.SVG.resetColorsToOriginalValues({object:this});this.parseColors();var values=[];for(var i=0;i<2;++i){for(var j=0,max=0;j<this.data[i].length;++j){if(typeof this.data[i][j]==='number'){values.push(this.data[i][j]);}else if(RGraph.SVG.isArray(this.data[i][j])&&properties.grouping==='grouped'){values.push(RGraph.SVG.arrayMax(this.data[i][j]));}else if(RGraph.SVG.isArray(this.data[i][j])&&properties.grouping==='stacked'){values.push(RGraph.SVG.arraySum(this.data[i][j]));}}}
var max=RGraph.SVG.arrayMax(values);if(typeof properties.xaxisScaleMax==='number'){max=properties.xaxisScaleMax;}
this.scale=RGraph.SVG.getScale({object:this,numlabels:properties.xaxisLabelsCount,unitsPre:properties.xaxisScaleUnitsPre,unitsPost:properties.xaxisScaleUnitsPost,max:max,min:properties.xaxisScaleMin,point:properties.xaxisScalePoint,round:properties.xaxisScaleRound,thousand:properties.xaxisScaleThousand,decimals:properties.xaxisScaleDecimals,strict:typeof properties.xaxisScaleMax==='number',formatter:properties.xaxisScaleFormatter});this.max=this.scale.max;this.min=this.scale.min;properties.yaxisScaleMax=this.scale.max;properties.yaxisScaleMin=this.scale.min;this.drawBackground(this);this.drawTitle();this.drawBars();this.drawAxes();this.drawLabels()
this.drawLabelsAbove();if(typeof properties.key!==null&&RGraph.SVG.drawKey){RGraph.SVG.drawKey(this);}else if(!RGraph.SVG.isNull(properties.key)){alert('The drawKey() function does not exist - have you forgotten to include the key library?');}
RGraph.SVG.fireCustomEvent(this,'ondraw');return this;};this.drawBackground=function()
{var properties=this.properties;var originalMarginRight=properties.marginRight,originalMarginLeft=properties.marginLeft;properties.marginRight=this.width-(properties.marginLeft+this.graphWidth);if(RGraph.SVG.isNull(properties.backgroundGridHlinesCount)){var resetToNull=true;properties.backgroundGridHlinesCount=this.left.length;}
var props=['','Aspect','Opacity','Stretch','X','Y','W','H',];for(i in props){if(typeof props[i]==='string'){properties['backgroundImage'+String(props[i])]=properties['backgroundImageLeft'+props[i]];}}
RGraph.SVG.drawBackground(this);if(resetToNull){properties.backgroundGridHlinesCount=null;}
properties.marginRight=originalMarginRight;properties.marginLeft=this.width-(properties.marginRight+this.graphWidth);if(RGraph.SVG.isNull(properties.backgroundGridHlinesCount)){properties.backgroundGridHlinesCount=this.right.length;}
var props=['','Aspect','Opacity','Stretch','X','Y','W','H',];for(i in props){if(typeof props[i]==='string'){properties['backgroundImage'+props[i]]=properties['backgroundImageRight'+props[i]];}}
RGraph.SVG.drawBackground(this);properties.marginLeft=originalMarginLeft;properties.marginRight=originalMarginRight;};this.drawAxes=function()
{if(properties.xaxis){RGraph.SVG.create({svg:this.svg,type:'path',parent:this.svg.all,attr:{d:'M {1} {2} L {3} {4}'.format(properties.marginLeft,this.height-properties.marginBottom,properties.marginLeft+this.graphWidth,this.height-properties.marginBottom),'stroke-width':properties.xaxisLinewidth,stroke:properties.xaxisColor,fill:'rgba(0,0,0,0)','shape-rendering':'crispEdges'}});var foo2=RGraph.SVG.create({svg:this.svg,type:'path',parent:this.svg.all,attr:{d:'M {1} {2} L {3} {4}'.format(this.width-properties.marginRight,this.height-properties.marginBottom,this.width-properties.marginRight-this.graphWidth,this.height-properties.marginBottom),'stroke-width':properties.xaxisLinewidth,stroke:properties.xaxisColor,fill:'rgba(0,0,0,0)','shape-rendering':'crispEdges'}});if(properties.xaxisTickmarks){var startY=this.height-properties.marginBottom,endY=this.height-properties.marginBottom+properties.xaxisTickmarksLength;for(var i=0;i<properties.xaxisLabelsPositionEdgeTickmarksCount;++i){var x=properties.marginLeft+(i*(this.graphWidth/properties.xaxisLabelsPositionEdgeTickmarksCount));RGraph.SVG.create({svg:this.svg,parent:this.svg.all,type:'path',attr:{d:'M{1} {2} L{3} {4}'.format(x+0.001,startY,x,endY),stroke:properties.xaxisColor,'stroke-width':properties.xaxisLinewidth,'shape-rendering':"crispEdges"}});}
if(!properties.yaxis){var x=properties.marginLeft+this.graphWidth;RGraph.SVG.create({svg:this.svg,parent:this.svg.all,type:'path',attr:{d:'M{1} {2} L{3} {4}'.format(x+0.001,startY,x,endY),stroke:properties.xaxisColor,'stroke-width':properties.xaxisLinewidth,'shape-rendering':"crispEdges"}});}
for(var i=0;i<properties.xaxisLabelsPositionEdgeTickmarksCount;++i){var x=properties.marginLeft+properties.marginCenter+this.graphWidth+((i+1)*(this.graphWidth/properties.xaxisLabelsPositionEdgeTickmarksCount));RGraph.SVG.create({svg:this.svg,parent:this.svg.all,type:'path',attr:{d:'M{1} {2} L{3} {4}'.format(x+0.001,startY,x,endY),stroke:properties.xaxisColor,'stroke-width':properties.xaxisLinewidth,'shape-rendering':"crispEdges"}});}
if(!properties.yaxis){var x=properties.marginLeft+this.graphWidth+properties.marginCenter;RGraph.SVG.create({svg:this.svg,parent:this.svg.all,type:'path',attr:{d:'M{1} {2} L{3} {4}'.format(x+0.001,startY,x,endY),stroke:properties.xaxisColor,'stroke-width':properties.xaxisLinewidth,'shape-rendering':"crispEdges"}});}}}
if(properties.yaxis){RGraph.SVG.create({svg:this.svg,type:'path',parent:this.svg.all,attr:{d:'M {1} {2} L {3} {4}'.format(properties.marginLeft+this.graphWidth,this.height-properties.marginBottom,properties.marginLeft+this.graphWidth,properties.marginTop),'stroke-width':properties.yaxisLinewidth,stroke:properties.yaxisColor,fill:'rgba(0,0,0,0)','shape-rendering':'crispEdges','stroke-linecap':'square'}});RGraph.SVG.create({svg:this.svg,type:'path',parent:this.svg.all,attr:{d:'M {1} {2} L {3} {4}'.format(properties.marginLeft+this.graphWidth+properties.marginCenter,this.height-properties.marginBottom,properties.marginLeft+this.graphWidth+properties.marginCenter,properties.marginTop),'stroke-width':properties.yaxisLinewidth,stroke:properties.yaxisColor,fill:'rgba(0,0,0,0)','shape-rendering':'crispEdges','stroke-linecap':'square'}});if(properties.yaxisTickmarks){var startX=properties.marginLeft+this.graphWidth,endX=properties.marginLeft+this.graphWidth+properties.yaxisTickmarksLength,numticks=this.left.length;for(var i=0;i<numticks;++i){var y=properties.marginTop+(i*(this.graphHeight/numticks));RGraph.SVG.create({svg:this.svg,parent:this.svg.all,type:'path',attr:{d:'M{1} {2} L{3} {4}'.format(startX+0.001,y,endX,y),stroke:properties.yaxisColor,'stroke-width':properties.yaxisLinewidth,'shape-rendering':"crispEdges"}});}
if(!properties.xaxis){var y=properties.marginTop+this.graphHeight;RGraph.SVG.create({svg:this.svg,parent:this.svg.all,type:'path',attr:{d:'M{1} {2} L{3} {4}'.format(startX+0.001,y,endX,y),stroke:properties.yaxisColor,'stroke-width':properties.yaxisLinewidth,'shape-rendering':"crispEdges"}});}
var startX=properties.marginLeft+this.graphWidth+properties.marginCenter,endX=properties.marginLeft+this.graphWidth+properties.marginCenter-properties.yaxisTickmarksLength,numticks=this.right.length;for(var i=0;i<numticks;++i){var y=properties.marginTop+(i*(this.graphHeight/numticks));RGraph.SVG.create({svg:this.svg,parent:this.svg.all,type:'path',attr:{d:'M{1} {2} L{3} {4}'.format(startX+0.001,y,endX,y),stroke:properties.yaxisColor,'stroke-width':properties.yaxisLinewidth,'shape-rendering':"crispEdges"}});}
if(!properties.xaxis){var y=properties.marginTop+this.graphHeight;RGraph.SVG.create({svg:this.svg,parent:this.svg.all,type:'path',attr:{d:'M{1} {2} L{3} {4}'.format(startX+0.001,y,endX,y),stroke:properties.yaxisColor,'stroke-width':properties.yaxisLinewidth,'shape-rendering':"crispEdges"}});}}}};this.drawLabels=function()
{var numlabels=properties.yaxisLabels?properties.yaxisLabels.length:5
var textConf=RGraph.SVG.getTextConf({object:this,prefix:'yaxisLabels'});for(var i=0;i<numlabels;++i){var segment=this.graphHeight/numlabels,y=properties.marginTop+(segment*i)+(segment/2)+properties.yaxisLabelsOffsety,x=properties.marginLeft+this.graphWidth+(properties.marginCenter/2)+properties.yaxisLabelsOffsetx;var text=RGraph.SVG.text({object:this,parent:this.svg.all,tag:'labels.yaxis',text:properties.yaxisLabels&&properties.yaxisLabels[i]?properties.yaxisLabels[i]:'',x:x,y:y,halign:'center',valign:'center',font:textConf.font,size:textConf.size,bold:textConf.bold,italic:textConf.italic,color:textConf.color});}
var y=this.height-properties.marginBottom+10,str=(typeof properties.xaxisScaleFormatter==='function')?properties.xaxisScaleFormatter(this,properties.xaxisScaleMin):(properties.xaxisScaleUnitsPre+properties.xaxisScaleMin.toFixed(properties.xaxisScaleDecimals).replace(/\./,properties.xaxisScalePoint)+properties.xaxisScaleUnitsPost);var textConf=RGraph.SVG.getTextConf({object:this,prefix:'xaxisLabels'});var text=RGraph.SVG.text({object:this,parent:this.svg.all,text:str,x:properties.marginLeft+this.graphWidth+properties.xaxisLabelsOffsetx,y:y+properties.xaxisLabelsOffsety,halign:'center',valign:'top',tag:'labels.xaxis',font:textConf.font,size:textConf.size,bold:textConf.bold,italic:textConf.italic,color:textConf.color});var segment=this.graphWidth/properties.xaxisLabelsCount;for(var i=0;i<this.scale.labels.length;++i){RGraph.SVG.text({object:this,parent:this.svg.all,text:this.scale.labels[i],x:properties.marginLeft+this.graphWidth-(segment*(i+1))+properties.xaxisLabelsOffsetx,y:this.height-properties.marginBottom+10+properties.xaxisLabelsOffsety,halign:'center',valign:'top',tag:'labels.xaxis',font:textConf.font,size:textConf.size,bold:textConf.bold,italic:textConf.italic,color:textConf.color});}
var text=RGraph.SVG.text({object:this,parent:this.svg.all,tag:'labels.xaxis',text:(typeof properties.xaxisScaleFormatter=='function')?properties.xaxisScaleFormatter(this,properties.xaxisScaleMin):properties.xaxisScaleUnitsPre+properties.xaxisScaleMin.toFixed(properties.xaxisScaleDecimals).replace(/\./,properties.xaxisScalePoint)+properties.xaxisScaleUnitsPost,x:properties.marginLeft+this.graphWidth+properties.marginCenter+properties.xaxisLabelsOffsetx,y:this.height-properties.marginBottom+10+properties.xaxisLabelsOffsety,halign:'center',valign:'top',font:textConf.font,size:textConf.size,bold:textConf.bold,italic:textConf.italic,color:textConf.color});for(var i=0;i<this.scale.labels.length;++i){RGraph.SVG.text({object:this,parent:this.svg.all,tag:'labels.xaxis',text:this.scale.labels[i],x:properties.marginLeft+this.graphWidth+properties.marginCenter+(segment*(i+1))+properties.xaxisLabelsOffsetx,y:this.height-properties.marginBottom+10+properties.xaxisLabelsOffsety,halign:'center',valign:'top',font:textConf.font,size:textConf.size,bold:textConf.bold,italic:textConf.italic,color:textConf.color});}};this.drawBars=function()
{if(properties.shadow){RGraph.SVG.setShadow({object:this,offsetx:properties.shadowOffsetx,offsety:properties.shadowOffsety,blur:properties.shadowBlur,opacity:properties.shadowOpacity,id:'dropShadow'});}
for(var i=0;i<this.left.length;++i){if(typeof this.left[i]==='number'){var color=properties.colors[this.sequentialIndex],tooltip=RGraph.SVG.isNull(properties.tooltips)?null:properties.tooltips[this.sequentialIndex],y=properties.marginTop+((this.graphHeight/this.left.length)*i)+properties.marginInner,width=this.getWidth(this.left[i]),x=properties.marginLeft+this.graphWidth-width,height=(this.graphHeight/this.left.length)-properties.marginInner-properties.marginInner;var rect=RGraph.SVG.create({svg:this.svg,parent:this.svg.all,type:'rect',attr:{x:x,y:y,width:width,height:height,fill:properties.colorsSequential?properties.colors[this.sequentialIndex]:properties.colors[0],stroke:properties.colorsStroke,'stroke-width':properties.linewidth,'shape-rendering':'crispEdges','data-original-x':x,'data-original-y':y,'data-original-width':width,'data-original-height':height,'data-tooltop':(tooltip||''),'data-index':i,'data-sequential-index':this.sequentialIndex,'data-value':this.left[i],filter:properties.shadow?'url(#dropShadow)':''}});this.coords.push({object:this,element:rect,x:parseFloat(rect.getAttribute('x')),y:parseFloat(rect.getAttribute('y')),width:parseFloat(rect.getAttribute('width')),height:parseFloat(rect.getAttribute('height'))});this.coordsLeft.push({object:this,element:rect,x:parseFloat(rect.getAttribute('x')),y:parseFloat(rect.getAttribute('y')),width:parseFloat(rect.getAttribute('width')),height:parseFloat(rect.getAttribute('height'))});this.installTooltipsEventListeners({rect:rect,index:i,sequentialIndex:this.sequentialIndex});this.sequentialIndex++;}else if(RGraph.SVG.isArray(this.left[i])&&properties.grouping==='stacked'){var accWidth=0;for(var j=0;j<this.left[i].length;++j){var color=properties.colors[this.sequentialIndex],tooltip=RGraph.SVG.isNull(properties.tooltips)?null:properties.tooltips[this.sequentialIndex],y=properties.marginTop+((this.graphHeight/this.left.length)*i)+properties.marginInner,width=this.getWidth(this.left[i][j]),accWidth=accWidth+width,x=properties.marginLeft+this.graphWidth-accWidth,height=(this.graphHeight/this.left.length)-properties.marginInner-properties.marginInner;if(j===0&&properties.shadow){var shadowBackfaceX=properties.marginLeft+this.graphWidth-this.getWidth(RGraph.SVG.arraySum(this.left[i])),shadowBackfaceWidth=this.getWidth(RGraph.SVG.arraySum(this.left[i]));var rect=RGraph.SVG.create({svg:this.svg,parent:this.svg.all,type:'rect',attr:{fill:'#eee',x:shadowBackfaceX,y:y,width:shadowBackfaceWidth,height:height,'stroke-width':0,'data-index':i,filter:'url(#dropShadow)'}});this.stackedBackfacesLeft[i]=rect;}
var rect=RGraph.SVG.create({svg:this.svg,parent:this.svg.all,type:'rect',attr:{x:x,y:y,width:width,height:height,fill:properties.colorsSequential?properties.colors[this.sequentialIndex]:properties.colors[j],stroke:properties.colorsStroke,'stroke-width':properties.linewidth,'shape-rendering':'crispEdges','data-original-x':x,'data-original-y':y,'data-original-width':width,'data-original-height':height,'data-tooltop':(tooltip||''),'data-index':i,'data-subindex':j,'data-sequential-index':this.sequentialIndex,'data-value':this.left[i][j]}});this.coords.push({object:this,element:rect,x:parseFloat(rect.getAttribute('x')),y:parseFloat(rect.getAttribute('y')),width:parseFloat(rect.getAttribute('width')),height:parseFloat(rect.getAttribute('height'))});this.coordsLeft.push({object:this,element:rect,x:parseFloat(rect.getAttribute('x')),y:parseFloat(rect.getAttribute('y')),width:parseFloat(rect.getAttribute('width')),height:parseFloat(rect.getAttribute('height'))});if(!this.coords2[i]){this.coords2[i]=[];}
if(!this.coords2Left[i]){this.coords2Left[i]=[];}
this.coords2[i].push({object:this,element:rect,x:parseFloat(rect.getAttribute('x')),y:parseFloat(rect.getAttribute('y')),width:parseFloat(rect.getAttribute('width')),height:parseFloat(rect.getAttribute('height'))});this.coords2Left[i].push({object:this,element:rect,x:parseFloat(rect.getAttribute('x')),y:parseFloat(rect.getAttribute('y')),width:parseFloat(rect.getAttribute('width')),height:parseFloat(rect.getAttribute('height'))});this.installTooltipsEventListeners({rect:rect,index:i,sequentialIndex:this.sequentialIndex});this.sequentialIndex++;}}else if(RGraph.SVG.isArray(this.left[i])&&properties.grouping==='grouped'){for(var j=0;j<this.left[i].length;++j){var color=properties.colors[this.sequentialIndex],tooltip=RGraph.SVG.isNull(properties.tooltips)?null:properties.tooltips[this.sequentialIndex],height=((this.graphHeight/this.left.length)-properties.marginInner-properties.marginInner-(properties.marginInnerGrouped*(this.left[i].length-1)))/this.left[i].length,y=properties.marginTop+((this.graphHeight/this.left.length)*i)+properties.marginInner+(height*j)+(j*properties.marginInnerGrouped),width=this.getWidth(this.left[i][j]),x=properties.marginLeft+this.graphWidth-width;var rect=RGraph.SVG.create({svg:this.svg,parent:this.svg.all,type:'rect',attr:{x:x,y:y,width:width,height:height,fill:properties.colorsSequential?properties.colors[this.sequentialIndex]:properties.colors[j],stroke:properties.colorsStroke,'stroke-width':properties.linewidth,'shape-rendering':'crispEdges','data-original-x':x,'data-original-y':y,'data-original-width':width,'data-original-height':height,'data-tooltop':(tooltip||''),'data-index':i,'data-subindex':j,'data-sequential-index':this.sequentialIndex,'data-value':this.left[i][j],filter:properties.shadow?'url(#dropShadow)':''}});this.coords.push({object:this,element:rect,x:parseFloat(rect.getAttribute('x')),y:parseFloat(rect.getAttribute('y')),width:parseFloat(rect.getAttribute('width')),height:parseFloat(rect.getAttribute('height'))});this.coordsLeft.push({object:this,element:rect,x:parseFloat(rect.getAttribute('x')),y:parseFloat(rect.getAttribute('y')),width:parseFloat(rect.getAttribute('width')),height:parseFloat(rect.getAttribute('height'))});if(!this.coords2[i]){this.coords2[i]=[];}
if(!this.coords2Left[i]){this.coords2Left[i]=[];}
this.coords2[i].push({object:this,element:rect,x:parseFloat(rect.getAttribute('x')),y:parseFloat(rect.getAttribute('y')),width:parseFloat(rect.getAttribute('width')),height:parseFloat(rect.getAttribute('height'))});this.coords2Left[i].push({object:this,element:rect,x:parseFloat(rect.getAttribute('x')),y:parseFloat(rect.getAttribute('y')),width:parseFloat(rect.getAttribute('width')),height:parseFloat(rect.getAttribute('height'))});this.installTooltipsEventListeners({rect:rect,index:i,sequentialIndex:this.sequentialIndex});this.sequentialIndex++;}}}
for(var i=0;i<this.right.length;++i){if(typeof this.right[i]==='number'){var color=properties.colors[this.sequentialIndex],tooltip=RGraph.SVG.isNull(properties.tooltips)?null:properties.tooltips[this.sequentialIndex],y=properties.marginTop+((this.graphHeight/this.right.length)*i)+properties.marginInner,width=this.getWidth(this.right[i]),x=properties.marginLeft+this.graphWidth+properties.marginCenter,height=(this.graphHeight/this.right.length)-properties.marginInner-properties.marginInner;var rect=RGraph.SVG.create({svg:this.svg,parent:this.svg.all,type:'rect',attr:{x:x,y:y,width:width,height:height,fill:properties.colorsSequential?properties.colors[this.sequentialIndex]:properties.colors[0],stroke:properties.colorsStroke,'stroke-width':properties.linewidth,'shape-rendering':'crispEdges','data-original-x':x,'data-original-y':y,'data-original-width':width,'data-original-height':height,'data-tooltop':(tooltip||''),'data-index':i,'data-sequential-index':this.sequentialIndex,'data-value':this.right[i],filter:properties.shadow?'url(#dropShadow)':''}});this.coords.push({object:this,element:rect,x:parseFloat(rect.getAttribute('x')),y:parseFloat(rect.getAttribute('y')),width:parseFloat(rect.getAttribute('width')),height:parseFloat(rect.getAttribute('height'))});this.coordsRight.push({object:this,element:rect,x:parseFloat(rect.getAttribute('x')),y:parseFloat(rect.getAttribute('y')),width:parseFloat(rect.getAttribute('width')),height:parseFloat(rect.getAttribute('height'))});this.installTooltipsEventListeners({rect:rect,index:i,sequentialIndex:this.sequentialIndex});this.sequentialIndex++;}else if(RGraph.SVG.isArray(this.right[i])&&properties.grouping==='stacked'){var accWidth=0;for(var j=0;j<this.right[i].length;++j){var color=properties.colors[this.sequentialIndex],tooltip=RGraph.SVG.isNull(properties.tooltips)?null:properties.tooltips[this.sequentialIndex],y=properties.marginTop+((this.graphHeight/this.right.length)*i)+properties.marginInner,width=this.getWidth(this.right[i][j]),x=properties.marginLeft+this.graphWidth+properties.marginCenter+accWidth,accWidth=accWidth+width,height=(this.graphHeight/this.left.length)-properties.marginInner-properties.marginInner;if(j===0&&properties.shadow){var shadowBackfaceX=properties.marginLeft+this.graphWidth+properties.marginCenter,shadowBackfaceWidth=this.getWidth(RGraph.SVG.arraySum(this.right[i]));var rect=RGraph.SVG.create({svg:this.svg,parent:this.svg.all,type:'rect',attr:{fill:'#eee',x:shadowBackfaceX,y:y,width:shadowBackfaceWidth,height:height,'stroke-width':0,'data-index':i,filter:'url(#dropShadow)'}});this.stackedBackfacesRight[i]=rect;}
var rect=RGraph.SVG.create({svg:this.svg,parent:this.svg.all,type:'rect',attr:{x:x,y:y,width:width,height:height,fill:properties.colorsSequential?properties.colors[this.sequentialIndex]:properties.colors[j],stroke:properties.colorsStroke,'stroke-width':properties.linewidth,'shape-rendering':'crispEdges','data-original-x':x,'data-original-y':y,'data-original-width':width,'data-original-height':height,'data-tooltop':(tooltip||''),'data-index':i,'data-subindex':j,'data-sequential-index':this.sequentialIndex,'data-value':this.right[i][j]}});this.coords.push({object:this,element:rect,x:parseFloat(rect.getAttribute('x')),y:parseFloat(rect.getAttribute('y')),width:parseFloat(rect.getAttribute('width')),height:parseFloat(rect.getAttribute('height'))});this.coordsRight.push({object:this,element:rect,x:parseFloat(rect.getAttribute('x')),y:parseFloat(rect.getAttribute('y')),width:parseFloat(rect.getAttribute('width')),height:parseFloat(rect.getAttribute('height'))});if(!this.coords2[i+this.left.length]){this.coords2[i+this.left.length]=[];}
if(!this.coords2Right[i]){this.coords2Right[i]=[];}
this.coords2[i+this.left.length].push({object:this,element:rect,x:parseFloat(rect.getAttribute('x')),y:parseFloat(rect.getAttribute('y')),width:parseFloat(rect.getAttribute('width')),height:parseFloat(rect.getAttribute('height'))});this.coords2Right[i].push({object:this,element:rect,x:parseFloat(rect.getAttribute('x')),y:parseFloat(rect.getAttribute('y')),width:parseFloat(rect.getAttribute('width')),height:parseFloat(rect.getAttribute('height'))});this.installTooltipsEventListeners({rect:rect,index:i,sequentialIndex:this.sequentialIndex});this.sequentialIndex++;}}else if(RGraph.SVG.isArray(this.right[i])&&properties.grouping==='grouped'){for(var j=0;j<this.right[i].length;++j){var color=properties.colors[this.sequentialIndex],tooltip=RGraph.SVG.isNull(properties.tooltips)?null:properties.tooltips[this.sequentialIndex],height=((this.graphHeight/this.right.length)-properties.marginInner-properties.marginInner-(properties.marginInnerGrouped*(this.right[i].length-1)))/this.right[i].length,y=properties.marginTop+((this.graphHeight/this.right.length)*i)+properties.marginInner+(height*j)+(j*properties.marginInnerGrouped),width=this.getWidth(this.right[i][j]),x=properties.marginLeft+this.graphWidth+properties.marginCenter;var rect=RGraph.SVG.create({svg:this.svg,parent:this.svg.all,type:'rect',attr:{x:x,y:y,width:width,height:height,fill:properties.colorsSequential?properties.colors[this.sequentialIndex]:properties.colors[j],stroke:properties.colorsStroke,'stroke-width':properties.linewidth,'shape-rendering':'crispEdges','data-original-x':x,'data-original-y':y,'data-original-width':width,'data-original-height':height,'data-tooltop':(tooltip||''),'data-index':i,'data-subindex':j,'data-sequential-index':this.sequentialIndex,'data-value':this.right[i][j],filter:properties.shadow?'url(#dropShadow)':''}});this.coords.push({object:this,element:rect,x:parseFloat(rect.getAttribute('x')),y:parseFloat(rect.getAttribute('y')),width:parseFloat(rect.getAttribute('width')),height:parseFloat(rect.getAttribute('height'))});this.coordsRight.push({object:this,element:rect,x:parseFloat(rect.getAttribute('x')),y:parseFloat(rect.getAttribute('y')),width:parseFloat(rect.getAttribute('width')),height:parseFloat(rect.getAttribute('height'))});if(!this.coords2[i+this.left.length]){this.coords2[i+this.left.length]=[];}
if(!this.coords2Right[i]){this.coords2Right[i]=[];}
this.coords2[i+this.left.length].push({object:this,element:rect,x:parseFloat(rect.getAttribute('x')),y:parseFloat(rect.getAttribute('y')),width:parseFloat(rect.getAttribute('width')),height:parseFloat(rect.getAttribute('height'))});this.coords2Right[i].push({object:this,element:rect,x:parseFloat(rect.getAttribute('x')),y:parseFloat(rect.getAttribute('y')),width:parseFloat(rect.getAttribute('width')),height:parseFloat(rect.getAttribute('height'))});this.installTooltipsEventListeners({rect:rect,index:i,sequentialIndex:this.sequentialIndex});this.sequentialIndex++;}}}};this.installTooltipsEventListeners=function(opt)
{var obj=this;if(!RGraph.SVG.isNull(properties.tooltips)&&(properties.tooltips[this.sequentialIndex]||typeof properties.tooltips==='string')){(function(idx,seq)
{opt.rect.addEventListener(properties.tooltipsEvent.replace(/^on/,''),function(e)
{obj.removeHighlight();RGraph.SVG.tooltip({object:obj,index:idx,group:null,sequentialIndex:seq,text:typeof properties.tooltips==='string'?properties.tooltips:properties.tooltips[seq],event:e});obj.highlight(e.target);},false);opt.rect.addEventListener('mousemove',function(e)
{e.target.style.cursor='pointer'},false);})(opt.index,opt.sequentialIndex);}};this.getWidth=function(value)
{var x1=this.getLeftXCoord(0),x2=this.getLeftXCoord(value);if(RGraph.SVG.isNull(x1)||RGraph.SVG.isNull(x2)){return null;}
return x1-x2;};this.getLeftXCoord=function(value)
{var width;if(value>this.scale.max){return null;}
if(value<this.scale.min){return null;}
width=((value-this.scale.min)/(this.scale.max-this.scale.min));width*=this.graphWidth;var x=properties.marginLeft+this.graphWidth-width;return x;};this.getRightXCoord=function(value)
{var width;if(value>this.scale.max){return null;}
if(value<this.scale.min){return null;}
width=((value-this.scale.min)/(this.scale.max-this.scale.min));width*=this.graphWidth;var x=properties.marginLeft+this.graphWidth+properties.marginCenter+width;return x;};this.highlight=function(rect)
{var x=parseInt(rect.getAttribute('x')),y=parseInt(rect.getAttribute('y')),width=parseInt(rect.getAttribute('width')),height=parseInt(rect.getAttribute('height'));var highlight=RGraph.SVG.create({svg:this.svg,parent:this.svg.all,type:'rect',attr:{'stroke-width':properties.highlightLinewidth,stroke:properties.highlightStroke,fill:properties.highlightFill,x:x-1,y:y-1,width:width+2,height:height+2},style:{pointerEvents:'none'}});RGraph.SVG.REG.set('highlight',highlight);};this.parseColors=function()
{if(!Object.keys(this.originalColors).length){this.originalColors={colors:RGraph.SVG.arrayClone(properties.colors),backgroundGridColor:RGraph.SVG.arrayClone(properties.backgroundGridColor),highlightFill:RGraph.SVG.arrayClone(properties.highlightFill),backgroundColor:RGraph.SVG.arrayClone(properties.backgroundColor)}}
var colors=properties.colors;if(colors){for(var i=0;i<colors.length;++i){colors[i]=RGraph.SVG.parseColorLinear({object:this,color:colors[i],direction:'horizontal'});}}
properties.backgroundGridColor=RGraph.SVG.parseColorLinear({object:this,color:properties.backgroundGridColor,direction:'horizontal'});properties.highlightFill=RGraph.SVG.parseColorLinear({object:this,color:properties.highlightFill,direction:'horizontal'});properties.backgroundColor=RGraph.SVG.parseColorLinear({object:this,color:properties.backgroundColor,direction:'horizontal'});};this.drawLabelsAbove=function()
{if(properties.labelsAbove){var textConf=RGraph.SVG.getTextConf({object:this,prefix:'labelsAbove'});for(var dataset=0,seq=0;dataset<this.data.length;++dataset,++seq){for(var i=0;i<this.data[dataset].length;++i,++seq){var value=this.data[dataset][i],halign=dataset===0?'right':'left',valign='center',hoffset=dataset===0?-10:10;if(typeof value==='number'){if(this.coords[seq]){var x=parseInt(this.coords[seq].element.getAttribute('x'))+hoffset+properties.labelsAboveOffsetx;var height=parseInt(this.coords[seq].element.getAttribute('height'));var y=parseInt(this.coords[seq].element.getAttribute('y'))+(height/2)+properties.labelsAboveOffsety;var width=parseInt(this.coords[seq].element.getAttribute('width'));if(dataset===1){x+=width;}
var str=RGraph.SVG.numberFormat({object:this,num:value.toFixed(properties.labelsAboveDecimals),prepend:typeof properties.labelsAboveUnitsPre==='string'?properties.labelsAboveUnitsPre:null,append:typeof properties.labelsAboveUnitsPost==='string'?properties.labelsAboveUnitsPost:null,point:typeof properties.labelsAbovePoint==='string'?properties.labelsAbovePoint:null,thousand:typeof properties.labelsAboveThousand==='string'?properties.labelsAboveThousand:null,formatter:typeof properties.labelsAboveFormatter==='function'?properties.labelsAboveFormatter:null});if(properties.labelsAboveSpecific&&properties.labelsAboveSpecific.length&&(typeof properties.labelsAboveSpecific[seq]==='string'||typeof properties.labelsAboveSpecific[seq]==='number')){str=String(properties.labelsAboveSpecific[seq]);}else if(properties.labelsAboveSpecific&&properties.labelsAboveSpecific.length&&typeof properties.labelsAboveSpecific[seq]!=='string'&&typeof properties.labelsAboveSpecific[seq]!=='number'){continue;}
RGraph.SVG.text({object:this,parent:this.svg.all,tag:'labels.above',text:str,x:x,y:y,halign:halign,valign:valign,font:textConf.font,size:textConf.size,bold:textConf.bold,italic:textConf.italic,color:textConf.color,background:properties.labelsAboveBackground,padding:properties.labelsAboveBackgroundPadding});}}else if(!RGraph.SVG.isNull(value)&&typeof value==='object'&&properties.grouping==='stacked'){for(var k=0,sum=0,width=0;k<this.coords2[seq].length;++k){sum+=parseFloat(this.coords2[seq][k].element.getAttribute('data-value'));}
var len=this.coords2[seq].length;if(dataset===0){var x=parseFloat(this.coords2[seq][len-1].x)+hoffset,height=parseFloat(this.coords2[seq][len-1].height),y=parseFloat(this.coords2[seq][0].y)+(height/2);}else{var x=parseFloat(this.coords2[this.data[0].length+i][0].x)+hoffset+properties.labelsAboveOffsetx,height=parseFloat(this.coords2[seq][len-1].height),y=parseFloat(this.coords2[seq][0].y)+(height/2)+properties.labelsAboveOffsety;for(var j=0;j<this.coords2Right[i].length;++j){x+=this.coords2Right[i][j].width;}}
var str=RGraph.SVG.numberFormat({object:this,num:sum.toFixed(properties.labelsAboveDecimals),prepend:typeof properties.labelsAboveUnitsPre==='string'?properties.labelsAboveUnitsPre:null,append:typeof properties.labelsAboveUnitsPost==='string'?properties.labelsAboveUnitsPost:null,point:typeof properties.labelsAbovePoint==='string'?properties.labelsAbovePoint:null,thousand:typeof properties.labelsAboveThousand==='string'?properties.labelsAboveThousand:null,formatter:typeof properties.labelsAboveFormatter==='function'?properties.labelsAboveFormatter:null});if(properties.labelsAboveSpecific&&properties.labelsAboveSpecific.length&&(typeof properties.labelsAboveSpecific[seq]==='string'||typeof properties.labelsAboveSpecific[seq]==='number')){str=String(properties.labelsAboveSpecific[seq]);}else if(properties.labelsAboveSpecific&&properties.labelsAboveSpecific.length&&typeof properties.labelsAboveSpecific[seq]!=='string'&&typeof properties.labelsAboveSpecific[seq]!=='number'){continue;}
RGraph.SVG.text({object:this,parent:this.svg.all,tag:'labels.above',text:str,x:x,y:y,halign:halign,valign:valign,font:textConf.font,size:textConf.size,bold:textConf.bold,italic:textConf.italic,color:textConf.color,background:properties.labelsAboveBackground,padding:properties.labelsAboveBackgroundPadding});}else if(!RGraph.SVG.isNull(value)&&typeof value==='object'&&properties.grouping==='grouped'){for(var k=0;k<value.length;++k){val=value[k];if(typeof val!=='number'){val='';}
var x=parseInt(this.coords[seq].element.getAttribute('x'))+hoffset+properties.labelsAboveOffsetx,height=parseInt(this.coords[seq].element.getAttribute('height')),y=parseInt(this.coords[seq].element.getAttribute('y'))+(height/2)+properties.labelsAboveOffsety,width=parseInt(this.coords[seq].element.getAttribute('width'));if(dataset===1){x+=width;}
var str=RGraph.SVG.numberFormat({object:this,num:parseFloat(val).toFixed(properties.labelsAboveDecimals),prepend:typeof properties.labelsAboveUnitsPre==='string'?properties.labelsAboveUnitsPre:null,append:typeof properties.labelsAboveUnitsPost==='string'?properties.labelsAboveUnitsPost:null,point:typeof properties.labelsAbovePoint==='string'?properties.labelsAbovePoint:null,thousand:typeof properties.labelsAboveThousand==='string'?properties.labelsAboveThousand:null,formatter:typeof properties.labelsAboveFormatter==='function'?properties.labelsAboveFormatter:null});if(val===0||RGraph.SVG.isNull(val)||val===''){str='';}
if(properties.labelsAboveSpecific&&properties.labelsAboveSpecific.length&&(typeof properties.labelsAboveSpecific[seq]==='string'||typeof properties.labelsAboveSpecific[seq]==='number')){str=String(properties.labelsAboveSpecific[seq]);}else if(properties.labelsAboveSpecific&&properties.labelsAboveSpecific.length&&typeof properties.labelsAboveSpecific[seq]!=='string'&&typeof properties.labelsAboveSpecific[seq]!=='number'){continue;}
RGraph.SVG.text({object:this,parent:this.svg.all,tag:'labels.above',text:str,x:x,y:y,halign:halign,valign:valign,font:textConf.font,size:textConf.size,bold:textConf.bold,italic:textConf.italic,color:textConf.color,background:properties.labelsAboveBackground,padding:properties.labelsAboveBackgroundPadding});seq++;}
seq--;}else if(RGraph.SVG.isNull(value)){--seq;}}
--seq;}}};this.on=function(type,func)
{if(type.substr(0,2)!=='on'){type='on'+type;}
RGraph.SVG.addCustomEventListener(this,type,func);return this;};this.exec=function(func)
{func(this);return this;};this.removeHighlight=function()
{var highlight=RGraph.SVG.REG.get('highlight');if(highlight&&highlight.parentNode){highlight.parentNode.removeChild(highlight);}
RGraph.SVG.REG.set('highlight',null);};this.getMarginCenter=this.getGutterCenter=function()
{var bold=typeof properties.yaxisLabelsBold==='boolean'?properties.yaxisLabelsBold:properties.textBold,font=typeof properties.yaxisLabelsFont==='string'?properties.yaxisLabelsFont:properties.textFont,size=typeof properties.yaxisLabelsSize==='number'?properties.yaxisLabelsSize:properties.textSize,width=0;if(properties.yaxisLabels){for(var i=0,len=properties.yaxisLabels.length;i<len;++i){width=Math.max(width,RGraph.SVG.measureText({text:properties.yaxisLabels[i],bold:bold,font:font,size:size})[0]);}}else{var width=50;}
return width+15;};this.drawTitle=function()
{RGraph.SVG.drawTitle(this);};this.grow=function()
{var opt=arguments[0]||{},frames=opt.frames||30,frame=0,obj=this,left=RGraph.SVG.arrayClone(this.left),right=RGraph.SVG.arrayClone(this.right),seq=0;this.draw();var iterate=function()
{for(var i=0,seq=0,len=obj.coordsLeft.length;i<len;++i,++seq){var multiplier=(frame/frames)
if(typeof left[i]==='number'){width=Math.abs(obj.getLeftXCoord(left[i])-obj.getLeftXCoord(0));left[i]=obj.left[i]*multiplier;obj.coordsLeft[i].element.setAttribute('width',width);obj.coords[seq].element.setAttribute('x',obj.getLeftXCoord(0)-width);}else if(typeof left[i]==='object'&&properties.grouping==='stacked'){var accumulativeWidth=0;for(var j=0,len2=left[i].length;j<len2;++j,++seq){width=Math.abs(obj.getLeftXCoord(left[i][j])-obj.getLeftXCoord(0));left[i][j]=obj.left[i][j]*multiplier;obj.coords[seq].element.setAttribute('width',width);obj.coords[seq].element.setAttribute('x',obj.getLeftXCoord(0)-width-accumulativeWidth);accumulativeWidth+=(properties.grouping==='stacked'?width:0);}
if(obj.stackedBackfacesLeft[i]){obj.stackedBackfacesLeft[i].setAttribute('width',accumulativeWidth);obj.stackedBackfacesLeft[i].setAttribute('x',obj.getLeftXCoord(0)-accumulativeWidth);}
--seq;}else if(typeof left[i]==='object'&&properties.grouping==='grouped'){for(var j=0,len2=left[i].length;j<len2;++j,++seq){width=Math.abs(obj.getLeftXCoord(left[i][j])-obj.getLeftXCoord(0));left[i][j]=obj.left[i][j]*multiplier;obj.coords[seq].element.setAttribute('width',width);obj.coords[seq].element.setAttribute('x',obj.getLeftXCoord(0)-width);}
--seq;}}
for(var i=0,seq=0,len=obj.coordsRight.length;i<len;++i,++seq){var multiplier=(frame/frames)
if(typeof right[i]==='number'){width=Math.abs(obj.getRightXCoord(right[i])-obj.getRightXCoord(0));right[i]=obj.right[i]*multiplier;obj.coordsRight[i].element.setAttribute('width',width);obj.coordsRight[seq].element.setAttribute('x',obj.getRightXCoord(0));}else if(typeof right[i]==='object'&&properties.grouping==='stacked'){var accumulativeWidth=0;for(var j=0,len2=right[i].length;j<len2;++j,++seq){width=Math.abs(obj.getRightXCoord(right[i][j])-obj.getRightXCoord(0));right[i][j]=obj.right[i][j]*multiplier;obj.coordsRight[seq].element.setAttribute('width',width);obj.coordsRight[seq].element.setAttribute('x',obj.getRightXCoord(0)+accumulativeWidth);accumulativeWidth+=width;}
if(obj.stackedBackfacesRight[i]){obj.stackedBackfacesRight[i].setAttribute('width',accumulativeWidth);obj.stackedBackfacesRight[i].setAttribute('x',obj.getRightXCoord(0));}
--seq;}else if(typeof right[i]==='object'&&properties.grouping==='grouped'){for(var j=0,len2=right[i].length;j<len2;++j,++seq){width=Math.abs(obj.getRightXCoord(right[i][j])-obj.getRightXCoord(0));right[i][j]=obj.right[i][j]*multiplier;obj.coordsRight[seq].element.setAttribute('width',width);obj.coordsRight[seq].element.setAttribute('x',obj.getRightXCoord(0));}
--seq;}}
if(frame++<=frames){RGraph.SVG.FX.update(iterate);}else if(opt.callback){(opt.callback)(obj);}};iterate();return this;};this.wave=function()
{var obj=this,opt=arguments[0]||{},frames=opt.frames||120,startFrames_left=[],startFrames_right=[],counters_left=[],counters_right=[];var framesperbar=frames/3,frame_left=-1,frame_right=-1,callback=arguments[1]||function(){},original_left=RGraph.SVG.arrayClone(this.left),original_right=RGraph.SVG.arrayClone(this.right);for(var i=0,len=this.left.length,seq=0;i<len;i+=1,++seq){startFrames_left[seq]=((frames/3)/(RGraph.SVG.arrayLinearize(this.left).length-1))*i;startFrames_right[seq]=((frames/3)/(RGraph.SVG.arrayLinearize(this.right).length-1))*i;counters_left[seq]=0;counters_right[seq]=0;if(RGraph.SVG.isArray(this.left[i])){for(var j=0;j<this.left[i].length;++j,seq++){startFrames_left[seq]=((frames/3)/(RGraph.SVG.arrayLinearize(this.left).length-1))*seq;startFrames_right[seq]=((frames/3)/(RGraph.SVG.arrayLinearize(this.right).length-1))*seq;counters_left[seq]=0;counters_right[seq]=0;}
--seq;}}
this.draw();for(var i=0,len=this.left.length;i<len;i+=1){if(typeof this.left[i]==='number'){this.left[i]=0;this.right[i]=0;if(this.coordsLeft[i]&&this.coordsLeft[i].element)this.coordsLeft[i].element.setAttribute('width',0);if(this.coordsRight[i]&&this.coordsRight[i].element)this.coordsRight[i].element.setAttribute('width',0);}else if(typeof this.left[i]==='object'&&!RGraph.SVG.isNull(this.left[i])){for(var j=0;j<this.left[i].length;++j){this.left[i][j]=0;this.right[i][j]=0;this.coords2Left[i][j].element.setAttribute('width',0);this.coords2Right[i][j].element.setAttribute('width',0);}}}
function iteratorLeft()
{++frame_left;for(var i=0,len=obj.left.length,seq=0;i<len;i+=1,seq+=1){if(frame_left>=startFrames_left[seq]){var isNull=RGraph.SVG.isNull(obj.left[i]);if(typeof obj.left[i]==='number'){obj.left[i]=Math.min(Math.abs(original_left[i]),Math.abs(original_left[i]*((counters_left[i]++)/framesperbar)));var rect_left=obj.coords[i].element;rect_left.setAttribute('width',parseFloat(rect_left.getAttribute('data-original-width'))*(obj.left[i]/rect_left.getAttribute('data-value')));rect_left.setAttribute('x',obj.properties.marginLeft+obj.graphWidth-(parseFloat(rect_left.getAttribute('data-original-width'))*(obj.left[i]/rect_left.getAttribute('data-value'))));}else if(RGraph.SVG.isArray(obj.left[i])){for(var j=0,accWidth=0;j<obj.left[i].length;++j,++seq){obj.left[i][j]=Math.min(Math.abs(original_left[i][j]),Math.abs(original_left[i][j]*((counters_left[seq]++)/framesperbar)));var rect_left=obj.coords[seq].element;rect_left.setAttribute('width',parseFloat(rect_left.getAttribute('data-original-width'))*(obj.left[i][j]/rect_left.getAttribute('data-value')));rect_left.setAttribute('x',obj.properties.marginLeft+obj.graphWidth-(parseFloat(rect_left.getAttribute('data-original-width'))*(obj.left[i][j]/rect_left.getAttribute('data-value')))-accWidth);if(obj.properties.grouping==='stacked'){accWidth+=parseFloat(rect_left.getAttribute('width'));}}
seq--;}
if(isNull){obj.left[i]=null;}}else{obj.left[i]=typeof obj.left[i]==='object'&&obj.left[i]?RGraph.SVG.arrayPad([],obj.left[i].length,0):(RGraph.SVG.isNull(obj.left[i])?null:0);}}
if(frame_left<=frames){RGraph.SVG.FX.update(iteratorLeft);}}
function iteratorRight()
{++frame_right;for(var i=0,len=obj.right.length,seq=0;i<len;i+=1,seq+=1){if(frame_right>=startFrames_right[seq]){var isNull=RGraph.SVG.isNull(obj.right[i]);if(typeof obj.right[i]==='number'){obj.right[i]=Math.min(Math.abs(original_right[i]),Math.abs(original_right[i]*((counters_right[i]++)/framesperbar)));var rect_right=obj.coords[i+obj.left.length].element;rect_right.setAttribute('width',parseFloat(rect_right.getAttribute('data-original-width'))*(obj.right[i]/rect_right.getAttribute('data-value')));rect_right.setAttribute('x',obj.properties.marginLeft+obj.graphWidth+properties.marginCenter);}else if(RGraph.SVG.isArray(obj.right[i])){for(var j=0,accWidth=0;j<obj.right[i].length;++j,++seq){obj.right[i][j]=Math.min(Math.abs(original_right[i][j]),Math.abs(original_right[i][j]*((counters_right[seq]++)/framesperbar)));var rect_right=obj.coordsRight[seq].element;rect_right.setAttribute('width',parseFloat(rect_right.getAttribute('data-original-width'))*(obj.right[i][j]/rect_right.getAttribute('data-value')));rect_right.setAttribute('x',obj.properties.marginLeft+obj.graphWidth+properties.marginCenter+accWidth);if(obj.properties.grouping==='stacked'){accWidth+=parseFloat(rect_right.getAttribute('width'));}}
seq--;}
if(isNull){obj.right[i]=null;}}else{obj.right[i]=typeof obj.right[i]==='object'&&obj.right[i]?RGraph.SVG.arrayPad([],obj.right[i].length,0):(RGraph.SVG.isNull(obj.right[i])?null:0);}}
if(frame_right<=frames){RGraph.SVG.FX.update(iteratorRight);}else{}}
iteratorLeft();iteratorRight();return this;};this.tooltipSubstitutions=function(opt)
{var indexes=RGraph.SVG.sequentialIndexToGrouped(opt.index,this.data);var linear_indexes=RGraph.SVG.sequentialIndexToGrouped(opt.index,this.data_arr);return{index:linear_indexes[1],dataset:linear_indexes[0],dataset2:linear_indexes[0]>=this.left.length?linear_indexes[0]-this.left.length:linear_indexes[0],sequentialIndex:opt.index,value:typeof this.data_arr[linear_indexes[0]]==='number'?this.data_arr[linear_indexes[0]]:this.data_arr[linear_indexes[0]][linear_indexes[1]],values:typeof this.data_arr[linear_indexes[0]]==='number'?[this.data_arr[linear_indexes[0]]]:this.data_arr[linear_indexes[0]]};};this.tooltipsFormattedCustom=function(specific,index)
{var side=((specific.dataset+1)>this.left.length)?'right':'left';var color=(!RGraph.SVG.isNull(properties.tooltipsFormattedKeyColors)&&typeof properties.tooltipsFormattedKeyColors==='object'&&properties.tooltipsFormattedKeyColors[index])?properties.tooltipsFormattedKeyColors[index]:properties.colors[index];if(typeof this[side][specific.dataset2]==='object'){var label=(!RGraph.isNull(properties.tooltipsFormattedKeyLabels)&&typeof properties.tooltipsFormattedKeyLabels==='object'&&properties.tooltipsFormattedKeyLabels[index])?properties.tooltipsFormattedKeyLabels[index]:'';}else{var label=(!RGraph.isNull(properties.tooltipsFormattedKeyLabels)&&typeof properties.tooltipsFormattedKeyLabels==='object'&&properties.tooltipsFormattedKeyLabels[specific.dataset2])?properties.tooltipsFormattedKeyLabels[specific.dataset2]:'';}
return{label:label,color:color};};this.positionTooltipStatic=function(args)
{var obj=args.object,e=args.event,tooltip=args.tooltip,index=args.index,svgXY=RGraph.SVG.getSVGXY(obj.svg),coords=this.coords[args.index];args.tooltip.style.left=(svgXY[0]
+coords.x
-(tooltip.offsetWidth/2)
+(coords.width/2))+'px';args.tooltip.style.top=(svgXY[1]
+coords.y
-tooltip.offsetHeight
-10)+'px';};for(i in conf.options){if(typeof i==='string'){this.set(i,conf.options[i]);}}};return this;})(window,document);