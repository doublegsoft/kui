
RGraph=window.RGraph||{isrgraph:true,isRGraph:true,rgraph:true};RGraph.SVG=RGraph.SVG||{};(function(win,doc,undefined)
{RGraph.SVG.HBar=function(conf)
{this.set=function(name,value)
{if(arguments.length===1&&typeof name==='object'){for(i in arguments[0]){if(typeof i==='string'){name=ret.name;value=ret.value;this.set(name,value);}}}else{var ret=RGraph.SVG.commonSetter({object:this,name:name,value:value});name=ret.name;value=ret.value;this.properties[name]=value;if(name==='colors'){this.originalColors=RGraph.SVG.arrayClone(value);this.colorsParsed=false;}}
return this;};this.get=function(name)
{return this.properties[name];};this.id=conf.id;this.uid=RGraph.SVG.createUID();this.container=document.getElementById(this.id);this.layers={};this.svg=RGraph.SVG.createSVG({object:this,container:this.container});this.isRGraph=true;this.isrgraph=true;this.rgraph=true;this.width=Number(this.svg.getAttribute('width'));this.height=Number(this.svg.getAttribute('height'));this.data=conf.data;this.type='hbar';this.coords=[];this.coords2=[];this.stackedBackfaces=[];this.colorsParsed=false;this.originalColors={};this.gradientCounter=1;RGraph.SVG.OR.add(this);this.container.style.display='inline-block';this.properties={marginLeft:100,marginRight:35,marginRightAuto:null,marginTop:35,marginBottom:35,marginLeftAuto:true,backgroundColor:null,backgroundImage:null,backgroundImageAspect:'none',backgroundImageStretch:true,backgroundImageOpacity:null,backgroundImageX:null,backgroundImageY:null,backgroundImageW:null,backgroundImageH:null,backgroundGrid:true,backgroundGridColor:'#ddd',backgroundGridLinewidth:1,backgroundGridHlines:true,backgroundGridHlinesCount:null,backgroundGridVlines:true,backgroundGridVlinesCount:null,backgroundGridBorder:true,backgroundGridDashed:false,backgroundGridDotted:false,backgroundGridDashArray:null,colors:['red','#0f0','#00f','#ff0','#0ff','#0f0','pink','orange','gray','black','red','#0f0','#00f','#ff0','#0ff','#0f0','pink','orange','gray','black'],colorsSequential:false,colorsStroke:'rgba(0,0,0,0)',marginInner:3,marginInnerGrouped:2,marginInnerTop:0,marginInnerBottom:0,xaxis:true,xaxisTickmarks:true,xaxisTickmarksLength:5,xaxisColor:'black',xaxisLabels:[],xaxisLabelsOffsetx:0,xaxisLabelsOffsety:0,xaxisLabelsCount:5,xaxisScale:true,xaxisScaleUnitsPre:'',xaxisScaleUnitsPost:'',xaxisScaleStrict:false,xaxisScaleDecimals:0,xaxisScaleThousand:'.',xaxisScaleThousand:',',xaxisScaleRound:false,xaxisScaleMax:null,xaxisScaleMin:0,xaxisScaleFormatter:null,xaxisLabelsPositionEdgeTickmarksCount:null,xaxisLabelsColor:null,xaxisLabelsBold:null,xaxisLabelsItalic:null,xaxisLabelsFont:null,xaxisLabelsSize:null,xaxisTitle:'',xaxisTitleBold:null,xaxisTitleSize:null,xaxisTitleFont:null,xaxisTitleColor:null,xaxisTitleItalic:null,xaxisTitleOffsetx:0,xaxisTitleOffsety:0,xaxisTitleX:null,xaxisTitleY:null,xaxisTitleHalign:null,xaxisTitleValign:null,yaxis:true,yaxisTickmarks:true,yaxisTickmarksLength:3,yaxisLabels:[],yaxisLabelsPosition:'section',yaxisLabelsOffsetx:0,yaxisLabelsOffsety:0,yaxisScale:false,yaxisLabelsPositionSectionTickmarksCount:null,yaxisColor:'black',yaxisLabelsFont:null,yaxisLabelsSize:null,yaxisLabelsColor:null,yaxisLabelsBold:null,yaxisLabelsItalic:null,yaxisPosition:'left',yaxisTitle:'',yaxisTitleBold:null,yaxisTitleSize:null,yaxisTitleFont:null,yaxisTitleColor:null,yaxisTitleItalic:null,yaxisTitleOffsetx:0,yaxisTitleOffsety:0,yaxisTitleX:null,yaxisTitleY:null,yaxisTitleHalign:null,yaxisTitleValign:null,textColor:'black',textFont:'Arial, Verdana, sans-serif',textSize:12,textBold:false,textItalic:false,labelsAbove:false,labelsAboveFont:null,labelsAboveSize:null,labelsAboveBold:null,labelsAboveItalic:null,labelsAboveColor:null,labelsAboveBackground:null,labelsAboveBackgroundPadding:0,labelsAboveUnitsPre:null,labelsAboveUnitsPost:null,labelsAbovePoint:null,labelsAboveThousand:null,labelsAboveFormatter:null,labelsAboveDecimals:null,labelsAboveOffsetx:0,labelsAboveOffsety:0,labelsAboveHalign:null,labelsAboveValign:'center',labelsAboveSpecific:null,linewidth:1,grouping:'grouped',tooltips:null,tooltipsOverride:null,tooltipsEffect:'fade',tooltipsCssClass:'RGraph_tooltip',tooltipsCss:null,tooltipsEvent:'click',tooltipsFormattedThousand:',',tooltipsFormattedPoint:'.',tooltipsFormattedDecimals:0,tooltipsFormattedUnitsPre:'',tooltipsFormattedUnitsPost:'',tooltipsFormattedKeyColors:null,tooltipsFormattedKeyColorsShape:'square',tooltipsFormattedKeyLabels:[],tooltipsFormattedTableHeaders:null,tooltipsFormattedTableData:null,tooltipsPointer:true,tooltipsPositionStatic:true,highlightStroke:'rgba(0,0,0,0)',highlightFill:'rgba(255,255,255,0.7)',highlightLinewidth:1,title:'',titleX:null,titleY:null,titleHalign:'center',titleValign:null,titleSize:null,titleColor:null,titleFont:null,titleBold:null,titleItalic:null,titleSubtitle:null,titleSubtitleColor:'#aaa',titleSubtitleSize:null,titleSubtitleFont:null,titleSubtitleBold:null,titleSubtitleItalic:null,shadow:false,shadowOffsetx:2,shadowOffsety:2,shadowBlur:2,shadowOpacity:0.25,key:null,keyColors:null,keyOffsetx:0,keyOffsety:0,keyLabelsOffsetx:0,keyLabelsOffsety:-1,keyLabelsSize:null,keyLabelsBold:null,keyLabelsItalic:null,keyLabelsColor:null,keyLabelsFont:null};RGraph.SVG.getGlobals(this);if(RGraph.SVG.FX&&typeof RGraph.SVG.FX.decorate==='function'){RGraph.SVG.FX.decorate(this);}
this.responsive=RGraph.SVG.responsive;var properties=this.properties;this.draw=function()
{RGraph.SVG.fireCustomEvent(this,'onbeforedraw');this.width=Number(this.svg.getAttribute('width'));this.height=Number(this.svg.getAttribute('height'));this.coords=[];this.coords2=[];RGraph.SVG.createDefs(this);if(properties.marginLeftAuto){var textConf=RGraph.SVG.getTextConf({object:this,prefix:'yaxisLabels'});for(var i=0,len=properties.yaxisLabels.length,maxLength=0;i<len;++i){var sizes=RGraph.SVG.measureText({text:properties.yaxisLabels[i],bold:textConf.bold,size:textConf.size,font:textConf.font,italic:textConf.italic});maxLength=Math.max(maxLength,sizes[0]);}
if(properties.yaxisTitle){var textConf_title=RGraph.SVG.getTextConf({object:this,prefix:'yaxisTitle'});var yaxisTitleSize=RGraph.SVG.measureText({text:properties.yaxisTitle,bold:textConf_title.bold,size:textConf_title.size,font:textConf_title.font,font:textConf_title.italic});maxLength=maxLength+yaxisTitleSize[1];}
properties.marginLeft=maxLength+15;if(properties.marginLeft<15){properties.marginLeft=15;}}
if(properties.yaxisPosition==='right'&&properties.marginRightAuto!==false){for(var i=0,len=properties.yaxisLabels.length,maxLength=0;i<len;++i){var sizes=RGraph.SVG.measureText({text:properties.yaxisLabels[i],bold:properties.yaxisLabelsBold||properties.textBold,size:properties.yaxisLabelsSize||properties.textSize,font:properties.yaxisLabelsFont||properties.textFont});maxLength=Math.max(maxLength,sizes[0]);}
properties.marginRight=maxLength+15;if(properties.marginRight<15){properties.marginRight=15;}}
this.graphWidth=this.width-properties.marginLeft-properties.marginRight;this.graphHeight=this.height-properties.marginTop-properties.marginBottom;RGraph.SVG.resetColorsToOriginalValues({object:this});this.parseColors();var values=[];for(var i=0,max=0;i<this.data.length;++i){if(typeof this.data[i]==='number'){values.push(this.data[i]);}else if(RGraph.SVG.isArray(this.data[i])&&properties.grouping==='grouped'){values.push(RGraph.SVG.arrayMax(this.data[i]));}else if(RGraph.SVG.isArray(this.data[i])&&properties.grouping==='stacked'){values.push(RGraph.SVG.arraySum(this.data[i]));}}
var max=RGraph.SVG.arrayMax(values);if(typeof properties.xaxisScaleMax==='number'){max=properties.xaxisScaleMax;}
if(properties.xaxisScaleMin==='mirror'||properties.xaxisScaleMin==='middle'||properties.xaxisScaleMin==='center'){this.mirrorScale=true;properties.xaxisScaleMin=properties.xaxisScaleMax* -1;}
this.scale=RGraph.SVG.getScale({object:this,numlabels:properties.xaxisLabelsCount,unitsPre:properties.xaxisScaleUnitsPre,unitsPost:properties.xaxisScaleUnitsPost,max:max,min:properties.xaxisScaleMin,point:properties.xaxisScalePoint,round:properties.xaxisScaleRound,thousand:properties.xaxisScaleThousand,decimals:properties.xaxisScaleDecimals,strict:typeof properties.xaxisScaleMax==='number',formatter:properties.xaxisScaleFormatter});if(this.mirrorScale){this.scale=RGraph.SVG.getScale({object:this,numlabels:properties.xaxisLabelsCount,unitsPre:properties.xaxisScaleUnitsPre,unitsPost:properties.xaxisScaleUnitsPost,max:this.scale.max,min:this.scale.max* -1,point:properties.xaxisScaleThousand,round:false,thousand:properties.xaxisScaleThousand,decimals:properties.xaxisScaleDecimals,strict:typeof properties.xaxisScaleMax==='number',formatter:properties.xaxisScaleFormatter});}
this.max=this.scale.max;properties.xaxisScaleMax=this.scale.max;this.min=this.scale.min;properties.xaxisScaleMin=this.scale.min;RGraph.SVG.drawBackground(this);this.drawBars();RGraph.SVG.drawXAxis(this);RGraph.SVG.drawYAxis(this);this.drawLabelsAbove();if(typeof properties.key!==null&&RGraph.SVG.drawKey){RGraph.SVG.drawKey(this);}else if(!RGraph.SVG.isNull(properties.key)){alert('The drawKey() function does not exist - have you forgotten to include the key library?');}
RGraph.SVG.attribution(this);var obj=this;document.body.addEventListener('mousedown',function(e)
{RGraph.SVG.removeHighlight(obj);},false);RGraph.SVG.fireCustomEvent(this,'ondraw');return this;};this.drawBars=function()
{if(properties.shadow){RGraph.SVG.setShadow({object:this,offsetx:properties.shadowOffsetx,offsety:properties.shadowOffsety,blur:properties.shadowBlur,opacity:properties.shadowOpacity,id:'dropShadow'});}
for(var i=0,sequentialIndex=0;i<this.data.length;++i,++sequentialIndex){if(typeof this.data[i]==='number'){var outerSegment=(this.graphHeight-properties.marginInnerTop-properties.marginInnerBottom)/this.data.length,width=this.getWidth(this.data[i]),height=((this.graphHeight-properties.marginInnerTop-properties.marginInnerBottom)/this.data.length)-properties.marginInner-properties.marginInner,x=this.getXCoord((this.scale.min<0&&this.scale.max<0)||(this.scale.min>0&&this.scale.max>0)?this.scale.min:0)-(this.data[i]<0?width:0),y=properties.marginTop+properties.marginInnerTop+properties.marginInner+(outerSegment*i);if(properties.yaxisPosition==='right'&&this.scale.min>=0){x=this.getXCoord(this.data[i]);}
if(properties.yaxisPosition==='right'&&this.scale.min<0){x=this.getXCoord(0);}
if(this.scale.min<0&&this.scale.max<0){x=this.width-properties.marginRight-width;}
if(this.mirrorScale&&properties.yaxisPosition==='right'){if(this.data[i]>0){x=this.getXCoord(0)-width;}else{x=this.getXCoord(0);}}
if(this.data[i]>0&&properties.yaxisPosition==='right'){x=this.getXCoord(0)-width;}
var rect=RGraph.SVG.create({svg:this.svg,parent:this.svg.all,type:'rect',attr:{stroke:properties.colorsStroke,fill:properties.colorsSequential?(properties.colors[sequentialIndex]?properties.colors[sequentialIndex]:properties.colors[properties.colors.length-1]):properties.colors[0],x:x,y:y,width:width,height:height,'stroke-width':properties.linewidth,'data-tooltip':(!RGraph.SVG.isNull(properties.tooltips)&&properties.tooltips.length)?properties.tooltips[i]:'','data-index':i,'data-original-x':x,'data-original-y':y,'data-original-width':width,'data-original-height':height,'data-sequential-index':sequentialIndex,'data-value':this.data[i],filter:properties.shadow?'url(#dropShadow)':''}});this.coords.push({object:this,element:rect,x:parseFloat(rect.getAttribute('x')),y:parseFloat(rect.getAttribute('y')),width:parseFloat(rect.getAttribute('width')),height:parseFloat(rect.getAttribute('height'))});if(!this.coords2[0]){this.coords2[0]=[];}
this.coords2[0].push({object:this,element:rect,x:parseFloat(rect.getAttribute('x')),y:parseFloat(rect.getAttribute('y')),width:parseFloat(rect.getAttribute('width')),height:parseFloat(rect.getAttribute('height'))});if(!RGraph.SVG.isNull(properties.tooltips)&&(properties.tooltips[sequentialIndex]||typeof properties.tooltips==='string')){var obj=this;(function(idx,seq)
{rect.addEventListener(properties.tooltipsEvent.replace(/^on/,''),function(e)
{obj.removeHighlight();RGraph.SVG.tooltip({object:obj,index:idx,group:null,sequentialIndex:seq,text:typeof properties.tooltips==='string'?properties.tooltips:properties.tooltips[seq],event:e});obj.highlight(e.target);},false);rect.addEventListener('mousemove',function(e)
{e.target.style.cursor='pointer';},false);})(i,sequentialIndex);}}else if(RGraph.SVG.isArray(this.data[i])&&properties.grouping==='grouped'){var outerSegment=((this.graphHeight-properties.marginInnerTop-properties.marginInnerBottom)/this.data.length),innerSegment=outerSegment-(2*properties.marginInner);for(var j=0;j<this.data[i].length;++j,++sequentialIndex){var width=Math.abs((this.data[i][j]/(this.max-this.min))*this.graphWidth),height=((innerSegment-((this.data[i].length-1)*properties.marginInnerGrouped))/this.data[i].length),y=properties.marginTop+properties.marginInner+properties.marginInnerTop+(outerSegment*i)+(j*height)+(j*properties.marginInnerGrouped),x=this.getXCoord(0)-(this.data[i][j]<0?width:0);if(this.scale.max<0&&this.scale.min<this.scale.max){var x1=this.getXCoord(this.data[i][j]);var x2=this.getXCoord(this.scale.max);x=x1;width=x2-x1;}else if(this.scale.min>0&&this.scale.max>this.scale.min){var x1=this.getXCoord(this.data[i][j]);var x2=this.getXCoord(this.scale.min);x=this.getXCoord(this.scale.min);width=x1-x2;}
if(properties.yaxisPosition==='right'&&this.scale.min===0){x=this.getXCoord(this.data[i][j]);}
if(properties.yaxisPosition==='right'&&this.scale.min<0&&this.scale.max>=0){if(this.data[i][j]<0){x=this.getXCoord(0);}else{x=this.getXCoord(this.data[i][j]);}}
var fill;if(properties.colorsSequential){if(properties.colors[sequentialIndex]){fill=properties.colors[sequentialIndex];}}else{if(properties.colors[j]){fill=properties.colors[j];}else{fill=properties.colors[properties.colors.length-1];}}
var rect=RGraph.SVG.create({svg:this.svg,type:'rect',parent:this.svg.all,attr:{stroke:properties['colorsStroke'],fill:fill,x:x,y:y,width:width,height:height,'stroke-width':properties.linewidth,'data-index':i,'data-original-x':x,'data-original-y':y,'data-original-width':width,'data-original-height':height,'data-sequential-index':sequentialIndex,'data-tooltip':(!RGraph.SVG.isNull(properties.tooltips)&&properties.tooltips.length)?properties.tooltips[sequentialIndex]:'','data-value':this.data[i][j],filter:properties.shadow?'url(#dropShadow)':''}});this.coords.push({object:this,element:rect,x:parseFloat(rect.getAttribute('x')),y:parseFloat(rect.getAttribute('y')),width:parseFloat(rect.getAttribute('width')),height:parseFloat(rect.getAttribute('height'))});if(!this.coords2[i]){this.coords2[i]=[];}
this.coords2[i].push({object:this,element:rect,x:parseFloat(rect.getAttribute('x')),y:parseFloat(rect.getAttribute('y')),width:parseFloat(rect.getAttribute('width')),height:parseFloat(rect.getAttribute('height'))});if(!RGraph.SVG.isNull(properties.tooltips)&&(properties.tooltips[sequentialIndex]||typeof properties.tooltips==='string')){var obj=this;(function(idx,seq)
{var indexes=RGraph.SVG.sequentialIndexToGrouped(seq,obj.data);rect.addEventListener(properties.tooltipsEvent.replace(/^on/,''),function(e)
{obj.removeHighlight();RGraph.SVG.tooltip({object:obj,group:idx,index:indexes[1],sequentialIndex:seq,text:typeof properties.tooltips==='string'?properties.tooltips:properties.tooltips[seq],event:e});obj.highlight(e.target);},false);rect.addEventListener('mousemove',function(e)
{e.target.style.cursor='pointer'},false);})(i,sequentialIndex);}}
--sequentialIndex;}else if(RGraph.SVG.isArray(this.data[i])&&properties.grouping==='stacked'){var section=((this.graphHeight-properties.marginInnerTop-properties.marginInnerBottom)/this.data.length);var x=this.getXCoord(0);for(var j=0;j<this.data[i].length;++j,++sequentialIndex){var outerHeight=(this.graphHeight-properties.marginInnerTop-properties.marginInnerBottom)/this.data.length,width=Math.abs((this.data[i][j]/(this.max-this.min))*this.graphWidth),height=outerHeight-(2*properties.marginInner),y=properties.marginTop+properties.marginInner+properties.marginInnerTop+(outerHeight*i);if(properties.yaxisPosition==='right'){x-=width;}
if(j===0&&properties.shadow){var fullWidth=Math.abs((RGraph.SVG.arraySum(this.data[i])/(this.max-this.min))*this.graphWidth);var rect=RGraph.SVG.create({svg:this.svg,parent:this.svg.all,type:'rect',attr:{x:properties.yaxisPosition==='right'?this.getXCoord(0)-fullWidth:this.getXCoord(0),y:y,width:fullWidth,height:height,fill:'white','stroke-width':0,'data-index':i,filter:'url(#dropShadow)'}});this.stackedBackfaces[i]=rect;}
var rect=RGraph.SVG.create({svg:this.svg,type:'rect',parent:this.svg.all,attr:{stroke:properties['colorsStroke'],fill:properties.colorsSequential?(properties.colors[sequentialIndex]?properties.colors[sequentialIndex]:properties.colors[properties.colors.length-1]):(properties.colors[j]?properties.colors[j]:properties.colors[properties.colors.length-1]),x:x,y:y,width:width,height:height,'stroke-width':properties.linewidth,'data-original-width':width,'data-original-height':height,'data-original-x':x-width,'data-original-y':y,'data-index':i,'data-sequential-index':sequentialIndex,'data-tooltip':(!RGraph.SVG.isNull(properties.tooltips)&&properties.tooltips.length)?properties.tooltips[sequentialIndex]:'','data-value':this.data[i][j]}});this.coords.push({object:this,element:rect,x:parseFloat(rect.getAttribute('x')),y:parseFloat(rect.getAttribute('y')),width:parseFloat(rect.getAttribute('width')),height:parseFloat(rect.getAttribute('height'))});if(!this.coords2[i]){this.coords2[i]=[];}
this.coords2[i].push({object:this,element:rect,x:parseFloat(rect.getAttribute('x')),y:parseFloat(rect.getAttribute('y')),width:parseFloat(rect.getAttribute('width')),height:parseFloat(rect.getAttribute('height'))});if(!RGraph.SVG.isNull(properties.tooltips)&&(properties.tooltips[sequentialIndex]||typeof properties.tooltips==='string')){var obj=this;(function(idx,seq)
{rect.addEventListener(properties.tooltipsEvent.replace(/^on/,''),function(e)
{obj.removeHighlight();var indexes=RGraph.SVG.sequentialIndexToGrouped(seq,obj.data);RGraph.SVG.tooltip({object:obj,index:indexes[1],group:idx,sequentialIndex:seq,text:typeof properties.tooltips==='string'?properties.tooltips:properties.tooltips[seq],event:e});obj.highlight(e.target);},false);rect.addEventListener('mousemove',function(e)
{e.target.style.cursor='pointer'},false);})(i,sequentialIndex);}
if(properties.yaxisPosition==='right'){}else{x+=width;}}
--sequentialIndex;}}};this.getXCoord=function(value)
{var prop=this.properties;if(value>this.scale.max){return null;}
if(value<this.scale.min){return null;}
var x=((value-this.scale.min)/(this.scale.max-this.scale.min));x*=this.graphWidth;if(properties.yaxisPosition==='right'){x=this.width-properties.marginRight-x;}else{x+=properties.marginLeft;}
return x;};this.getWidth=function(value)
{if(this.scale.max<=0&&this.scale.min<this.scale.max){var x1=this.getXCoord(this.scale.max);var x2=this.getXCoord(value);}else if(this.scale.min>0&&this.scale.max>this.scale.min){var x1=this.getXCoord(this.scale.min);var x2=this.getXCoord(value);}else{var x1=this.getXCoord(0);var x2=this.getXCoord(value);}
return Math.abs(x1-x2);};this.highlight=function(rect)
{var x=rect.getAttribute('x'),y=rect.getAttribute('y'),width=rect.getAttribute('width'),height=rect.getAttribute('height');var highlight=RGraph.SVG.create({svg:this.svg,type:'rect',parent:this.svg.all,attr:{stroke:properties.highlightStroke,fill:properties.highlightFill,x:x,y:y,width:width,height:height,'stroke-width':properties.highlightLinewidth},style:{pointerEvents:'none'}});RGraph.SVG.REG.set('highlight',highlight);};this.parseColors=function()
{if(!Object.keys(this.originalColors).length){this.originalColors={colors:RGraph.SVG.arrayClone(properties.colors),backgroundGridColor:RGraph.SVG.arrayClone(properties.backgroundGridColor),highlightFill:RGraph.SVG.arrayClone(properties.highlightFill),backgroundColor:RGraph.SVG.arrayClone(properties.backgroundColor)}}
var colors=properties.colors;if(colors){for(var i=0;i<colors.length;++i){colors[i]=RGraph.SVG.parseColorLinear({object:this,color:colors[i],direction:'horizontal',start:properties.marginLeft,end:this.width-properties.marginRight});}}
properties.backgroundGridColor=RGraph.SVG.parseColorLinear({object:this,color:properties.backgroundGridColor,direction:'horizontal',start:properties.marginLeft,end:this.width-properties.marginRight});properties.highlightFill=RGraph.SVG.parseColorLinear({object:this,color:properties.highlightFill,direction:'horizontal',start:properties.marginLeft,end:this.width-properties.marginRight});properties.backgroundColor=RGraph.SVG.parseColorLinear({object:this,color:properties.backgroundColor});};this.drawLabelsAbove=function()
{if(properties.labelsAbove){var textConf=RGraph.SVG.getTextConf({object:this,prefix:'labelsAbove'});var data=RGraph.SVG.arrayLinearize(this.data);for(var i=0;i<this.coords.length;++i){var value=data[i].toFixed(typeof properties.labelsAboveDecimals==='number'?properties.labelsAboveDecimals:properties.xaxisScaleDecimals);var indexes=RGraph.SVG.sequentialIndexToGrouped(i,this.data);if(RGraph.SVG.isArray(this.data[indexes[0]])&&properties.grouping==='stacked'){if((indexes[1]+1)===this.data[indexes[0]].length){value=RGraph.SVG.arraySum(this.data[indexes[0]]);value=value.toFixed(typeof properties.labelsAboveDecimals==='number'?properties.labelsAboveDecimals:properties.xaxisScaleDecimals);}else{continue;}}
var str=properties.labelsAboveSpecific?properties.labelsAboveSpecific[i].toString():RGraph.SVG.numberFormat({object:this,num:value,prepend:typeof properties.labelsAboveUnitsPre==='string'?properties.labelsAboveUnitsPre:null,append:typeof properties.labelsAboveUnitsPost==='string'?properties.labelsAboveUnitsPost:null,point:typeof properties.labelsAbovePoint==='string'?properties.labelsAbovePoint:null,thousand:typeof properties.labelsAboveThousand==='string'?properties.labelsAboveThousand:null,formatter:typeof properties.labelsAboveFormatter==='function'?properties.labelsAboveFormatter:null});var halign=properties.labelsAboveHalign,valign=properties.labelsAboveValign;var dimensions=RGraph.SVG.measureText({text:str,bold:textConf.bold,font:textConf.font,size:textConf.size});var x=(value>=0)?(parseFloat(this.coords[i].element.getAttribute('x'))+7+properties.labelsAboveOffsetx):parseFloat(this.coords[i].element.getAttribute('x')-7-properties.labelsAboveOffsetx),y=parseFloat(this.coords[i].element.getAttribute('y'))+parseFloat(this.coords[i].element.getAttribute('height')/2)+properties.labelsAboveOffsety,width=dimensions[0],height=dimensions[1],halign=(value>=0)?'left':'right';if(properties.yaxisPosition==='left'&&properties.grouping==='grouped'){x=parseFloat(this.coords[i].element.getAttribute('x'))+parseFloat(this.coords[i].element.getAttribute('width'))+7+properties.labelsAboveOffsetx}
if(properties.yaxisPosition==='right'){x=(value>=0)?(parseFloat(this.coords[i].element.getAttribute('x'))-7-properties.labelsAboveOffsetx):parseFloat(this.coords[i].element.getAttribute('x')+7+properties.labelsAboveOffsetx),halign=(value>=0)?'right':'left';}else if(RGraph.SVG.isArray(this.data[indexes[0]])&&properties.grouping==='stacked'&&properties.yaxisPosition==='left'){x+=this.coords2[indexes[0]][indexes[1]].width;}
if(properties.yaxisPosition==='right'&&properties.grouping==='grouped'&&properties.xaxisScaleMax>0&&properties.xaxisScaleMin<0){var value=this.coords[i].element.getAttribute('data-value');if(value<0){x=this.getXCoord(value)+7;}else{x=this.getXCoord(value)-7;}}
if(properties.yaxisPosition==='left'&&properties.grouping==='grouped'&&properties.xaxisScaleMax>0&&properties.xaxisScaleMin<0){var value=this.coords[i].element.getAttribute('data-value');if(value<0){x=this.getXCoord(value)-7;}else{x=this.getXCoord(value)+7;}}
if(properties.yaxisPosition==='right'){if(x-width<properties.marginLeft&&value>0){halign='left';x=properties.marginLeft+5;properties.labelsAboveBackground=properties.labelsAboveBackground||'rgba(255,255,255,0.95)';}}else{if(x+width>this.width&&value>0){halign='right';x=this.width-5;properties.labelsAboveBackground=properties.labelsAboveBackground||'rgba(255,255,255,0.95)';}}
if(properties.grouping==='stacked'&&typeof this.data[indexes[0]]==='number'&&properties.yaxisPosition==='left'){x+=parseInt(this.coords[i].element.getAttribute('width'));}
if(typeof properties.labelsAboveHalign==='string'){halign=properties.labelsAboveHalign;}
var text=RGraph.SVG.text({object:this,parent:this.svg.all,tag:'labels.above',text:str,x:x,y:y,halign:halign,valign:valign,font:textConf.font,size:textConf.size,bold:textConf.bold,italic:textConf.italic,color:textConf.color,background:properties.labelsAboveBackground||null,padding:properties.labelsAboveBackgroundPadding||0});}}};this.on=function(type,func)
{if(type.substr(0,2)!=='on'){type='on'+type;}
RGraph.SVG.addCustomEventListener(this,type,func);return this;};this.exec=function(func)
{func(this);return this;};this.removeHighlight=function()
{var highlight=RGraph.SVG.REG.get('highlight');if(highlight&&highlight.parentNode){highlight.parentNode.removeChild(highlight);}
RGraph.SVG.REG.set('highlight',null);};this.grow=function()
{var opt=arguments[0]||{},frames=opt.frames||30,frame=0,obj=this,data=[],height=null,seq=0;data=RGraph.SVG.arrayClone(this.data);this.draw();var iterate=function()
{for(var i=0,seq=0,len=obj.coords.length;i<len;++i,++seq){var multiplier=(frame/frames)
if(typeof data[i]==='number'){width=Math.abs(obj.getXCoord(data[i])-obj.getXCoord(0));obj.data[i]=data[i]*multiplier;width=multiplier*width;obj.coords[seq].element.setAttribute('width',width);obj.coords[seq].element.setAttribute('x',data[i]>0?obj.getXCoord(0)-(properties.yaxisPosition==='right'?width:0):(properties.xaxisScaleMin<0&&properties.xaxisScaleMax>0?(properties.yaxisPosition==='right'?obj.getXCoord(0):obj.getXCoord(0)-width):obj.getXCoord(0)));}else if(typeof data[i]==='object'){var accumulativeWidth=0;for(var j=0,len2=data[i].length;j<len2;++j,++seq){width=Math.abs(obj.getXCoord(data[i][j])-obj.getXCoord(0));width=multiplier*width;obj.data[i][j]=data[i][j]*multiplier;accumulativeWidth+=width;obj.coords[seq].element.setAttribute('width',width);if(properties.yaxisPosition==='right'){if(properties.grouping==='stacked'){obj.coords[seq].element.setAttribute('x',obj.getXCoord(0)-accumulativeWidth);}else{obj.coords[seq].element.setAttribute('x',obj.getXCoord(0)-(obj.coords[seq].element.getAttribute('data-value')<0?0:width));}}else{obj.coords[seq].element.setAttribute('x',properties.grouping==='stacked'?obj.getXCoord(0)+(accumulativeWidth-width):properties.grouping==='grouped'&&obj.coords[seq].element.getAttribute('data-value')<0?obj.getXCoord(0)-width:obj.getXCoord(0));}}
if(obj.stackedBackfaces[i]){obj.stackedBackfaces[i].setAttribute('width',accumulativeWidth);obj.stackedBackfaces[i].setAttribute('x',properties.yaxisPosition==='right'?obj.getXCoord(0)-accumulativeWidth:obj.getXCoord(0));}
--seq;}}
if(frame++<frames){RGraph.SVG.FX.update(iterate);}else if(opt.callback){RGraph.SVG.redraw();(opt.callback)(obj);}};iterate();return this;};this.wave=function()
{var stackedAccumulativeWidth=0;this.draw();var obj=this,opt=arguments[0]||{};opt.frames=opt.frames||60;opt.startFrames=[];opt.counters=[];var framesperbar=opt.frames/3,frame=-1,callback=opt.callback||function(){},width;for(var i=0,len=this.coords.length;i<len;i+=1){opt.startFrames[i]=((opt.frames/2)/(obj.coords.length-1))*i;opt.counters[i]=0;this.coords[i].element.setAttribute('width',0);if(properties.grouping==='stacked'&&obj.stackedBackfaces[i]){obj.stackedBackfaces[i].setAttribute('width',0);}}
if(properties.grouping==='stacked'&&properties.yaxisPosition==='right'){previousX=obj.width-properties.marginRight;previousW=0;}
function iterator()
{++frame;var group=0;for(var i=0,len=obj.coords.length;i<len;i+=1){if(frame>opt.startFrames[i]){var originalWidth=obj.coords[i].element.getAttribute('data-original-width'),value=parseFloat(obj.coords[i].element.getAttribute('data-value')),seq=i;indexes=RGraph.SVG.sequentialIndexToGrouped(i,obj.data);if(indexes[0]!==group){group=indexes[0];}
obj.coords[i].element.setAttribute('width',width=Math.min(((frame-opt.startFrames[i])/framesperbar)*originalWidth,originalWidth));stackedAccumulativeWidth+=width;if(properties.yaxisPosition==='right'){if(properties.grouping==='stacked'){if(indexes[1]===0){obj.coords[i].element.setAttribute('x',obj.width-properties.marginRight-width);var previousX=obj.coords[i].element.getAttribute('x');}else{obj.coords[i].element.setAttribute('x',previousX-width);}}else{obj.coords[i].element.setAttribute('x',value>=0?obj.getXCoord(0)-width:obj.getXCoord(0));}}else{obj.coords[i].element.setAttribute('x',value>=0?obj.getXCoord(0):obj.getXCoord(0)-width);}
if(properties.grouping==='stacked'&&RGraph.SVG.isArray(obj.data[indexes[0]])){if(properties.yaxisPosition==='left'&&indexes[1]>0){obj.coords[i].element.setAttribute('x',parseInt(obj.coords[i-1].element.getAttribute('x'))+parseInt(obj.coords[i-1].element.getAttribute('width')));}
for(var j=0,cumulativeWidth=0;j<obj.coords2[indexes[0]].length;++j){cumulativeWidth+=parseInt(obj.coords2[indexes[0]][j].element.getAttribute('width'))}
if(properties.yaxisPosition==='right'){obj.stackedBackfaces[indexes[0]].setAttribute('width',cumulativeWidth);obj.stackedBackfaces[indexes[0]].setAttribute('x',obj.width-properties.marginRight-cumulativeWidth);}else{obj.stackedBackfaces[indexes[0]].setAttribute('x',obj.getXCoord(0));obj.stackedBackfaces[indexes[0]].setAttribute('width',cumulativeWidth);}
previousX=obj.coords[i].element.getAttribute('x');previousW=obj.coords[i].element.getAttribute('width');}}}
if(frame>=opt.frames){callback(obj);}else{RGraph.SVG.FX.update(iterator);}}
iterator();return this;};this.tooltipSubstitutions=function(opt)
{var indexes=RGraph.SVG.sequentialIndexToGrouped(opt.index,this.data);return{index:indexes[1],dataset:indexes[0],sequentialIndex:opt.index,value:typeof this.data[indexes[0]]==='number'?this.data[indexes[0]]:this.data[indexes[0]][indexes[1]],values:typeof this.data[indexes[0]]==='number'?[this.data[indexes[0]]]:this.data[indexes[0]]};};this.tooltipsFormattedCustom=function(specific,index)
{if(typeof this.data[0]==='object'){var label=(!RGraph.SVG.isNull(properties.tooltipsFormattedKeyLabels)&&typeof properties.tooltipsFormattedKeyLabels==='object'&&properties.tooltipsFormattedKeyLabels[index])?properties.tooltipsFormattedKeyLabels[index]:'';}else{var label=(!RGraph.SVG.isNull(properties.tooltipsFormattedKeyLabels)&&typeof properties.tooltipsFormattedKeyLabels==='object'&&properties.tooltipsFormattedKeyLabels[specific.index])?properties.tooltipsFormattedKeyLabels[specific.index]:'';}
return{label:label};};this.positionTooltipStatic=function(args)
{var obj=args.object,e=args.event,tooltip=args.tooltip,index=args.index,svgXY=RGraph.SVG.getSVGXY(obj.svg),coords=this.coords[args.index];args.tooltip.style.left=(svgXY[0]
+coords.x
-(tooltip.offsetWidth/2)
+(coords.width/2))+'px';args.tooltip.style.top=(svgXY[1]
+coords.y
-tooltip.offsetHeight
-10)+'px';};for(i in conf.options){if(typeof i==='string'){this.set(i,conf.options[i]);}}};return this;})(window,document);